"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/price-search/route";
exports.ids = ["app/api/price-search/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprice-search%2Froute&page=%2Fapi%2Fprice-search%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprice-search%2Froute.ts&appDir=%2FUsers%2Fiseulgi%2FDesktop%2FProject%2Fepisode%2Fend%2Fclaude%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fiseulgi%2FDesktop%2FProject%2Fepisode%2Fend%2Fclaude&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprice-search%2Froute&page=%2Fapi%2Fprice-search%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprice-search%2Froute.ts&appDir=%2FUsers%2Fiseulgi%2FDesktop%2FProject%2Fepisode%2Fend%2Fclaude%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fiseulgi%2FDesktop%2FProject%2Fepisode%2Fend%2Fclaude&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_iseulgi_Desktop_Project_episode_end_claude_src_app_api_price_search_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/price-search/route.ts */ \"(rsc)/./src/app/api/price-search/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/price-search/route\",\n        pathname: \"/api/price-search\",\n        filename: \"route\",\n        bundlePath: \"app/api/price-search/route\"\n    },\n    resolvedPagePath: \"/Users/iseulgi/Desktop/Project/episode/end/claude/src/app/api/price-search/route.ts\",\n    nextConfigOutput,\n    userland: _Users_iseulgi_Desktop_Project_episode_end_claude_src_app_api_price_search_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/price-search/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwcmljZS1zZWFyY2glMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnByaWNlLXNlYXJjaCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnByaWNlLXNlYXJjaCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmlzZXVsZ2klMkZEZXNrdG9wJTJGUHJvamVjdCUyRmVwaXNvZGUlMkZlbmQlMkZjbGF1ZGUlMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGaXNldWxnaSUyRkRlc2t0b3AlMkZQcm9qZWN0JTJGZXBpc29kZSUyRmVuZCUyRmNsYXVkZSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDbUM7QUFDaEg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zb2JpLXBheW1lbnQtcGxhdGZvcm0vP2QyMmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2lzZXVsZ2kvRGVza3RvcC9Qcm9qZWN0L2VwaXNvZGUvZW5kL2NsYXVkZS9zcmMvYXBwL2FwaS9wcmljZS1zZWFyY2gvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3ByaWNlLXNlYXJjaC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3ByaWNlLXNlYXJjaFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvcHJpY2Utc2VhcmNoL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2lzZXVsZ2kvRGVza3RvcC9Qcm9qZWN0L2VwaXNvZGUvZW5kL2NsYXVkZS9zcmMvYXBwL2FwaS9wcmljZS1zZWFyY2gvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3ByaWNlLXNlYXJjaC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprice-search%2Froute&page=%2Fapi%2Fprice-search%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprice-search%2Froute.ts&appDir=%2FUsers%2Fiseulgi%2FDesktop%2FProject%2Fepisode%2Fend%2Fclaude%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fiseulgi%2FDesktop%2FProject%2Fepisode%2Fend%2Fclaude&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/price-search/route.ts":
/*!*******************************************!*\
  !*** ./src/app/api/price-search/route.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n\n\n// OpenAI 클라이언트 초기화 (환경변수에서 API 키 읽기)\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY || \"\"\n});\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const { productName, category, targetPrice } = body;\n        // 기본 검증\n        if (!productName || !category) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"상품명과 카테고리는 필수입니다.\"\n            }, {\n                status: 400\n            });\n        }\n        // OpenAI API 키가 없는 경우 목업 데이터 반환\n        if (!process.env.OPENAI_API_KEY) {\n            const mockResponse = generateMockPriceData(productName, category, targetPrice);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                data: mockResponse,\n                message: \"가격 검색이 완료되었습니다. (목업 데이터)\"\n            });\n        }\n        // 개선된 ChatGPT 프롬프트 - 더 구체적이고 정확한 응답을 위해\n        const prompt = `\n다음 상품에 대한 온라인 쇼핑몰별 가격 정보를 정확한 JSON 형태로 제공해주세요.\n\n상품 정보:\n- 상품명: \"${productName}\"\n- 카테고리: \"${category}\"\n${targetPrice ? `- 목표 가격: ${targetPrice.toLocaleString()}원` : \"\"}\n\n요구사항:\n1. 반드시 유효한 JSON 형태로만 응답하세요\n2. 가격은 반드시 숫자 타입으로 설정하세요\n3. URL은 간단하고 짧은 형태로 생성하세요 (200자 이내)\n4. 평점은 1.0-5.0 사이의 숫자로 설정하세요\n5. 긴 URL 매개변수를 피하고 기본 검색 URL만 사용하세요\n\nJSON 형태 (이 형태를 정확히 따라주세요):\n{\n  \"productName\": \"${productName}\",\n  \"category\": \"${category}\",\n  \"sources\": [\n    {\n      \"platform\": \"쇼핑몰명\",\n      \"price\": 숫자,\n      \"url\": \"https://도메인/search?q=${encodeURIComponent(productName)}\",\n      \"availability\": true,\n      \"shipping\": 숫자,\n      \"rating\": 소수점포함숫자\n    }\n  ],\n  \"averagePrice\": 숫자,\n  \"lowestPrice\": 숫자,\n  \"recommendedPlatform\": \"최저가플랫폼명\"\n}\n\n포함할 쇼핑몰: 네이버쇼핑, 쿠팡, 11번가, G마켓, 옥션, 인터파크, 롯데온\n- 6-7개 결과 제공\n- ${category} 카테고리에 적합한 합리적인 가격 범위 사용\n- 배송비는 0원 또는 2500-3000원 중 설정\n- 재고는 대부분 available로 설정 (90% 이상)\n\n중요: JSON 형태 외에는 다른 텍스트를 포함하지 마세요.`;\n        const completion = await openai.chat.completions.create({\n            model: \"gpt-3.5-turbo\",\n            messages: [\n                {\n                    role: \"system\",\n                    content: \"당신은 온라인 쇼핑 가격 비교 전문가입니다. 사용자가 요청한 상품의 가격 정보를 정확한 JSON 형태로 제공합니다.\"\n                },\n                {\n                    role: \"user\",\n                    content: prompt\n                }\n            ],\n            max_tokens: 2000,\n            temperature: 0.1\n        });\n        const responseText = completion.choices[0]?.message?.content;\n        console.log(\"OpenAI API Response:\", responseText);\n        if (!responseText) {\n            throw new Error(\"OpenAI API에서 응답을 받지 못했습니다.\");\n        }\n        // JSON 파싱 및 응답 검증\n        let priceData;\n        try {\n            // JSON 응답에서 불필요한 텍스트 제거\n            const cleanedResponse = responseText.replace(/```json\\n?/g, \"\").replace(/```\\n?/g, \"\").trim();\n            priceData = JSON.parse(cleanedResponse);\n            // 응답 구조 검증\n            if (!validatePriceSearchResponse(priceData)) {\n                throw new Error(\"응답 형식이 올바르지 않습니다.\");\n            }\n            // 데이터 품질 검증 및 보정\n            priceData = sanitizePriceData(priceData, productName, category);\n        } catch (parseError) {\n            console.error(\"JSON parsing or validation error:\", parseError);\n            console.error(\"Original response:\", responseText);\n            // JSON 파싱 또는 검증 실패 시 목업 데이터 반환\n            priceData = generateMockPriceData(productName, category, targetPrice);\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: priceData,\n            message: \"가격 검색이 완료되었습니다.\",\n            searchedAt: new Date().toISOString()\n        });\n    } catch (error) {\n        console.error(\"Price search error:\", error);\n        // 오류 시 목업 데이터 반환\n        const { productName, category, targetPrice } = await request.json();\n        const mockResponse = generateMockPriceData(productName, category, targetPrice);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: mockResponse,\n            message: \"가격 검색이 완료되었습니다. (목업 데이터)\",\n            warning: \"실제 검색 중 오류가 발생하여 예상 데이터를 제공합니다.\"\n        });\n    }\n}\n// 목업 데이터 생성 함수\nfunction generateMockPriceData(productName, category, targetPrice) {\n    const basePrice = targetPrice || getBasePriceByCategory(category);\n    const platforms = [\n        \"네이버쇼핑\",\n        \"쿠팡\",\n        \"11번가\",\n        \"G마켓\",\n        \"옥션\",\n        \"인터파크\",\n        \"롯데온\",\n        \"위메프\"\n    ];\n    const sources = platforms.slice(0, 6).map((platform)=>{\n        const priceVariation = (Math.random() - 0.5) * 0.3 // ±15% 변동\n        ;\n        const price = Math.round(basePrice * (1 + priceVariation));\n        return {\n            platform,\n            price,\n            url: `https://shopping.${platform.toLowerCase()}.com/search?q=${encodeURIComponent(productName)}`,\n            availability: Math.random() > 0.1,\n            shipping: Math.random() > 0.5 ? 0 : 3000,\n            rating: Math.round((3.5 + Math.random() * 1.5) * 10) / 10\n        };\n    });\n    const prices = sources.map((s)=>s.price);\n    const averagePrice = Math.round(prices.reduce((sum, price)=>sum + price, 0) / prices.length);\n    const lowestPrice = Math.min(...prices);\n    const recommendedPlatform = sources.find((s)=>s.price === lowestPrice)?.platform || sources[0].platform;\n    return {\n        productName,\n        category,\n        sources: sources.sort((a, b)=>a.price - b.price),\n        averagePrice,\n        lowestPrice,\n        recommendedPlatform\n    };\n}\n// 카테고리별 기본 가격 추정\nfunction getBasePriceByCategory(category) {\n    const categoryPrices = {\n        \"온라인쇼핑\": 50000,\n        \"편의점\": 3000,\n        \"마트\": 15000,\n        \"백화점\": 100000,\n        \"카페\": 5000,\n        \"배달음식\": 20000,\n        \"서점\": 15000,\n        \"영화관\": 12000,\n        \"기타\": 30000\n    };\n    return categoryPrices[category] || 30000;\n}\n// 응답 구조 검증 함수\nfunction validatePriceSearchResponse(data) {\n    if (!data || typeof data !== \"object\") return false;\n    const required = [\n        \"productName\",\n        \"category\",\n        \"sources\",\n        \"averagePrice\",\n        \"lowestPrice\",\n        \"recommendedPlatform\"\n    ];\n    if (!required.every((field)=>field in data)) return false;\n    if (!Array.isArray(data.sources) || data.sources.length === 0) return false;\n    return data.sources.every((source)=>source && typeof source.platform === \"string\" && typeof source.price === \"number\" && typeof source.url === \"string\" && typeof source.availability === \"boolean\" && typeof source.shipping === \"number\" && (source.rating === undefined || typeof source.rating === \"number\"));\n}\n// 데이터 품질 검증 및 보정 함수\nfunction sanitizePriceData(data, productName, category) {\n    // 기본 필드 보정\n    data.productName = data.productName || productName;\n    data.category = data.category || category;\n    // sources 배열 정리 및 검증\n    if (Array.isArray(data.sources)) {\n        data.sources = data.sources.filter((source)=>source && source.platform && typeof source.price === \"number\").map((source)=>({\n                platform: String(source.platform),\n                price: Math.max(0, Math.round(Number(source.price))),\n                url: sanitizeUrl(source.url, source.platform, productName),\n                availability: source.availability !== false,\n                shipping: Math.max(0, Math.round(Number(source.shipping || 0))),\n                rating: source.rating ? Math.min(5.0, Math.max(1.0, Number(source.rating))) : undefined\n            })).slice(0, 8) // 최대 8개로 제한\n        ;\n    }\n    // 가격 통계 재계산\n    if (data.sources && data.sources.length > 0) {\n        const prices = data.sources.map((s)=>s.price);\n        data.averagePrice = Math.round(prices.reduce((sum, price)=>sum + price, 0) / prices.length);\n        data.lowestPrice = Math.min(...prices);\n        data.recommendedPlatform = data.sources.find((s)=>s.price === data.lowestPrice)?.platform || data.sources[0].platform;\n    }\n    return data;\n}\n// URL 정리 및 검증 함수\nfunction sanitizeUrl(url, platform, productName) {\n    if (!url || typeof url !== \"string\") {\n        return getDefaultUrl(platform, productName);\n    }\n    // URL 길이가 200자를 초과하면 기본 URL 사용\n    if (url.length > 200) {\n        return getDefaultUrl(platform, productName);\n    }\n    return url;\n}\n// 기본 URL 생성 함수\nfunction getDefaultUrl(platform, productName) {\n    const encodedProduct = encodeURIComponent(productName);\n    const urlMap = {\n        \"네이버쇼핑\": `https://search.shopping.naver.com/search/all?query=${encodedProduct}`,\n        \"쿠팡\": `https://www.coupang.com/np/search?q=${encodedProduct}`,\n        \"11번가\": `https://search.11st.co.kr/Search.tmall?kwd=${encodedProduct}`,\n        \"G마켓\": `http://search.gmarket.co.kr/search.aspx?keyword=${encodedProduct}`,\n        \"옥션\": `http://search.auction.co.kr/search/search.aspx?keyword=${encodedProduct}`,\n        \"인터파크\": `http://shopping.interpark.com/search?q=${encodedProduct}`,\n        \"롯데온\": `https://www.lotteon.com/search/search/search.ecn?q=${encodedProduct}`\n    };\n    return urlMap[platform] || `https://search.shopping.naver.com/search/all?query=${encodedProduct}`;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9wcmljZS1zZWFyY2gvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXVEO0FBQzVCO0FBRTNCLHFDQUFxQztBQUNyQyxNQUFNRSxTQUFTLElBQUlELDhDQUFNQSxDQUFDO0lBQ3hCRSxRQUFRQyxRQUFRQyxHQUFHLENBQUNDLGNBQWMsSUFBSTtBQUN4QztBQVFPLGVBQWVDLEtBQUtDLE9BQW9CO0lBQzdDLElBQUk7UUFDRixNQUFNQyxPQUEyQixNQUFNRCxRQUFRRSxJQUFJO1FBQ25ELE1BQU0sRUFBRUMsV0FBVyxFQUFFQyxRQUFRLEVBQUVDLFdBQVcsRUFBRSxHQUFHSjtRQUUvQyxRQUFRO1FBQ1IsSUFBSSxDQUFDRSxlQUFlLENBQUNDLFVBQVU7WUFDN0IsT0FBT1oscURBQVlBLENBQUNVLElBQUksQ0FDdEI7Z0JBQ0VJLFNBQVM7Z0JBQ1RDLE9BQU87WUFDVCxHQUNBO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxnQ0FBZ0M7UUFDaEMsSUFBSSxDQUFDWixRQUFRQyxHQUFHLENBQUNDLGNBQWMsRUFBRTtZQUMvQixNQUFNVyxlQUFlQyxzQkFBc0JQLGFBQWFDLFVBQVVDO1lBQ2xFLE9BQU9iLHFEQUFZQSxDQUFDVSxJQUFJLENBQUM7Z0JBQ3ZCSSxTQUFTO2dCQUNUSyxNQUFNRjtnQkFDTkcsU0FBUztZQUNYO1FBQ0Y7UUFFQSx3Q0FBd0M7UUFDeEMsTUFBTUMsU0FBUyxDQUFDOzs7O1FBSVosRUFBRVYsWUFBWTtTQUNiLEVBQUVDLFNBQVM7QUFDcEIsRUFBRUMsY0FBYyxDQUFDLFNBQVMsRUFBRUEsWUFBWVMsY0FBYyxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUc7Ozs7Ozs7Ozs7O2tCQVcvQyxFQUFFWCxZQUFZO2VBQ2pCLEVBQUVDLFNBQVM7Ozs7O21DQUtTLEVBQUVXLG1CQUFtQlosYUFBYTs7Ozs7Ozs7Ozs7OztFQWFuRSxFQUFFQyxTQUFTOzs7O2lDQUlvQixDQUFDO1FBRTlCLE1BQU1ZLGFBQWEsTUFB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QUFvQyxFQUFFQSxlQUFlLENBQUM7UUFDN0QsUUFBUSxDQUFDLDJDQUEyQyxFQUFFQSxlQUFlLENBQUM7UUFDdEUsT0FBTyxDQUFDLGdEQUFnRCxFQUFFQSxlQUFlLENBQUM7UUFDMUUsTUFBTSxDQUFDLHVEQUF1RCxFQUFFQSxlQUFlLENBQUM7UUFDaEYsUUFBUSxDQUFDLHVDQUF1QyxFQUFFQSxlQUFlLENBQUM7UUFDbEUsT0FBTyxDQUFDLG1EQUFtRCxFQUFFQSxlQUFlLENBQUM7SUFDL0U7SUFFQSxPQUFPQyxNQUFNLENBQUN2QyxTQUFTLElBQUksQ0FBQyxtREFBbUQsRUFBRXNDLGVBQWUsQ0FBQztBQUNuRyIsInNvdXJjZXMiOlsid2VicGFjazovL3NvYmktcGF5bWVudC1wbGF0Zm9ybS8uL3NyYy9hcHAvYXBpL3ByaWNlLXNlYXJjaC9yb3V0ZS50cz8zZTMyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCBPcGVuQUkgZnJvbSAnb3BlbmFpJ1xuXG4vLyBPcGVuQUkg7YG065287J207Ja47Yq4IOy0iOq4sO2ZlCAo7ZmY6rK967OA7IiY7JeQ7IScIEFQSSDtgqQg7J296riwKVxuY29uc3Qgb3BlbmFpID0gbmV3IE9wZW5BSSh7XG4gIGFwaUtleTogcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVkgfHwgJycsXG59KVxuXG5pbnRlcmZhY2UgUHJpY2VTZWFyY2hSZXF1ZXN0IHtcbiAgcHJvZHVjdE5hbWU6IHN0cmluZ1xuICBjYXRlZ29yeTogc3RyaW5nXG4gIHRhcmdldFByaWNlPzogbnVtYmVyXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYm9keTogUHJpY2VTZWFyY2hSZXF1ZXN0ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcbiAgICBjb25zdCB7IHByb2R1Y3ROYW1lLCBjYXRlZ29yeSwgdGFyZ2V0UHJpY2UgfSA9IGJvZHlcblxuICAgIC8vIOq4sOuzuCDqsoDspp1cbiAgICBpZiAoIXByb2R1Y3ROYW1lIHx8ICFjYXRlZ29yeSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6ICfsg4HtkojrqoXqs7wg7Lm07YWM6rOg66as64qUIO2VhOyImOyeheuLiOuLpC4nXG4gICAgICAgIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKVxuICAgIH1cblxuICAgIC8vIE9wZW5BSSBBUEkg7YKk6rCAIOyXhuuKlCDqsr3smrAg66qp7JeFIOuNsOydtO2EsCDrsJjtmZhcbiAgICBpZiAoIXByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZKSB7XG4gICAgICBjb25zdCBtb2NrUmVzcG9uc2UgPSBnZW5lcmF0ZU1vY2tQcmljZURhdGEocHJvZHVjdE5hbWUsIGNhdGVnb3J5LCB0YXJnZXRQcmljZSlcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IG1vY2tSZXNwb25zZSxcbiAgICAgICAgbWVzc2FnZTogJ+qwgOqyqSDqsoDsg4nsnbQg7JmE66OM65CY7JeI7Iq164uI64ukLiAo66qp7JeFIOuNsOydtO2EsCknXG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIOqwnOyEoOuQnCBDaGF0R1BUIO2UhOuhrO2UhO2KuCAtIOuNlCDqtazssrTsoIHsnbTqs6Ag7KCV7ZmV7ZWcIOydkeuLteydhCDsnITtlbRcbiAgICBjb25zdCBwcm9tcHQgPSBgXG7ri6TsnYwg7IOB7ZKI7JeQIOuMgO2VnCDsmKjrnbzsnbgg7Ie87ZWR66qw67OEIOqwgOqyqSDsoJXrs7Trpbwg7KCV7ZmV7ZWcIEpTT04g7ZiV7YOc66GcIOygnOqzte2VtOyjvOyEuOyalC5cblxu7IOB7ZKIIOygleuztDpcbi0g7IOB7ZKI66qFOiBcIiR7cHJvZHVjdE5hbWV9XCJcbi0g7Lm07YWM6rOg66asOiBcIiR7Y2F0ZWdvcnl9XCJcbiR7dGFyZ2V0UHJpY2UgPyBgLSDrqqntkZwg6rCA6rKpOiAke3RhcmdldFByaWNlLnRvTG9jYWxlU3RyaW5nKCl97JuQYCA6ICcnfVxuXG7smpTqtazsgqztla06XG4xLiDrsJjrk5zsi5wg7Jyg7Zqo7ZWcIEpTT04g7ZiV7YOc66Gc66eMIOydkeuLte2VmOyEuOyalFxuMi4g6rCA6rKp7J2AIOuwmOuTnOyLnCDsiKvsnpAg7YOA7J6F7Jy866GcIOyEpOygle2VmOyEuOyalFxuMy4gVVJM7J2AIOqwhOuLqO2VmOqzoCDsp6fsnYAg7ZiV7YOc66GcIOyDneyEse2VmOyEuOyalCAoMjAw7J6QIOydtOuCtClcbjQuIO2PieygkOydgCAxLjAtNS4wIOyCrOydtOydmCDsiKvsnpDroZwg7ISk7KCV7ZWY7IS47JqUXG41LiDquLQgVVJMIOunpOqwnOuzgOyImOulvCDtlLztlZjqs6Ag6riw67O4IOqygOyDiSBVUkzrp4wg7IKs7Jqp7ZWY7IS47JqUXG5cbkpTT04g7ZiV7YOcICjsnbQg7ZiV7YOc66W8IOygle2Zle2eiCDrlLDrnbzso7zshLjsmpQpOlxue1xuICBcInByb2R1Y3ROYW1lXCI6IFwiJHtwcm9kdWN0TmFtZX1cIixcbiAgXCJjYXRlZ29yeVwiOiBcIiR7Y2F0ZWdvcnl9XCIsXG4gIFwic291cmNlc1wiOiBbXG4gICAge1xuICAgICAgXCJwbGF0Zm9ybVwiOiBcIuyHvO2VkeuqsOuqhVwiLFxuICAgICAgXCJwcmljZVwiOiDsiKvsnpAsXG4gICAgICBcInVybFwiOiBcImh0dHBzOi8v64+E66mU7J24L3NlYXJjaD9xPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHByb2R1Y3ROYW1lKX1cIixcbiAgICAgIFwiYXZhaWxhYmlsaXR5XCI6IHRydWUsXG4gICAgICBcInNoaXBwaW5nXCI6IOyIq+yekCxcbiAgICAgIFwicmF0aW5nXCI6IOyGjOyImOygkO2PrO2VqOyIq+yekFxuICAgIH1cbiAgXSxcbiAgXCJhdmVyYWdlUHJpY2VcIjog7Iir7J6QLFxuICBcImxvd2VzdFByaWNlXCI6IOyIq+yekCxcbiAgXCJyZWNvbW1lbmRlZFBsYXRmb3JtXCI6IFwi7LWc7KCA6rCA7ZSM656r7Y+866qFXCJcbn1cblxu7Y+s7ZWo7ZWgIOyHvO2VkeuqsDog64Sk7J2067KE7Ie87ZWRLCDsv6DtjKEsIDEx67KI6rCALCBH66eI7LyTLCDsmKXshZgsIOyduO2EsO2MjO2BrCwg66Gv642w7JioXG4tIDYtN+qwnCDqsrDqs7wg7KCc6rO1XG4tICR7Y2F0ZWdvcnl9IOy5tO2FjOqzoOumrOyXkCDsoIHtlantlZwg7ZWp66as7KCB7J24IOqwgOqyqSDrspTsnIQg7IKs7JqpXG4tIOuwsOyGoeu5hOuKlCAw7JuQIOuYkOuKlCAyNTAwLTMwMDDsm5Ag7KSRIOyEpOyglVxuLSDsnqzqs6DripQg64yA67aA67aEIGF2YWlsYWJsZeuhnCDshKTsoJUgKDkwJSDsnbTsg4EpXG5cbuykkeyalDogSlNPTiDtmJXtg5wg7Jm47JeQ64qUIOuLpOuluCDthY3siqTtirjrpbwg7Y+s7ZWo7ZWY7KeAIOuniOyEuOyalC5gXG5cbiAgICBjb25zdCBjb21wbGV0aW9uID0gYXdhaXQgb3BlbmFpLmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcbiAgICAgIG1vZGVsOiBcImdwdC0zLjUtdHVyYm9cIixcbiAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICByb2xlOiBcInN5c3RlbVwiLFxuICAgICAgICAgIGNvbnRlbnQ6IFwi64u57Iug7J2AIOyYqOudvOyduCDsh7ztlZEg6rCA6rKpIOu5hOq1kCDsoITrrLjqsIDsnoXri4jri6QuIOyCrOyaqeyekOqwgCDsmpTssq3tlZwg7IOB7ZKI7J2YIOqwgOqyqSDsoJXrs7Trpbwg7KCV7ZmV7ZWcIEpTT04g7ZiV7YOc66GcIOygnOqzte2VqeuLiOuLpC5cIlxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgcm9sZTogXCJ1c2VyXCIsXG4gICAgICAgICAgY29udGVudDogcHJvbXB0XG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBtYXhfdG9rZW5zOiAyMDAwLFxuICAgICAgdGVtcGVyYXR1cmU6IDAuMVxuICAgIH0pXG5cbiAgICBjb25zdCByZXNwb25zZVRleHQgPSBjb21wbGV0aW9uLmNob2ljZXNbMF0/Lm1lc3NhZ2U/LmNvbnRlbnRcbiAgICBcbiAgICBjb25zb2xlLmxvZygnT3BlbkFJIEFQSSBSZXNwb25zZTonLCByZXNwb25zZVRleHQpXG4gICAgXG4gICAgaWYgKCFyZXNwb25zZVRleHQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignT3BlbkFJIEFQSeyXkOyEnCDsnZHri7XsnYQg67Cb7KeAIOuqu+2WiOyKteuLiOuLpC4nKVxuICAgIH1cblxuICAgIC8vIEpTT04g7YyM7IuxIOuwjyDsnZHri7Ug6rKA7KadXG4gICAgbGV0IHByaWNlRGF0YVxuICAgIHRyeSB7XG4gICAgICAvLyBKU09OIOydkeuLteyXkOyEnCDrtojtlYTsmpTtlZwg7YWN7Iqk7Yq4IOygnOqxsFxuICAgICAgY29uc3QgY2xlYW5lZFJlc3BvbnNlID0gcmVzcG9uc2VUZXh0LnJlcGxhY2UoL2BgYGpzb25cXG4/L2csICcnKS5yZXBsYWNlKC9gYGBcXG4/L2csICcnKS50cmltKClcbiAgICAgIHByaWNlRGF0YSA9IEpTT04ucGFyc2UoY2xlYW5lZFJlc3BvbnNlKVxuICAgICAgXG4gICAgICAvLyDsnZHri7Ug6rWs7KGwIOqygOymnVxuICAgICAgaWYgKCF2YWxpZGF0ZVByaWNlU2VhcmNoUmVzcG9uc2UocHJpY2VEYXRhKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+ydkeuLtSDtmJXsi53snbQg7Jis67CU66W07KeAIOyViuyKteuLiOuLpC4nKVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyDrjbDsnbTthLAg7ZKI7KeIIOqygOymnSDrsI8g67O07KCVXG4gICAgICBwcmljZURhdGEgPSBzYW5pdGl6ZVByaWNlRGF0YShwcmljZURhdGEsIHByb2R1Y3ROYW1lLCBjYXRlZ29yeSlcbiAgICAgIFxuICAgIH0gY2F0Y2ggKHBhcnNlRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0pTT04gcGFyc2luZyBvciB2YWxpZGF0aW9uIGVycm9yOicsIHBhcnNlRXJyb3IpXG4gICAgICBjb25zb2xlLmVycm9yKCdPcmlnaW5hbCByZXNwb25zZTonLCByZXNwb25zZVRleHQpXG4gICAgICAvLyBKU09OIO2MjOyLsSDrmJDripQg6rKA7KadIOyLpO2MqCDsi5wg66qp7JeFIOuNsOydtO2EsCDrsJjtmZhcbiAgICAgIHByaWNlRGF0YSA9IGdlbmVyYXRlTW9ja1ByaWNlRGF0YShwcm9kdWN0TmFtZSwgY2F0ZWdvcnksIHRhcmdldFByaWNlKVxuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZGF0YTogcHJpY2VEYXRhLFxuICAgICAgbWVzc2FnZTogJ+qwgOqyqSDqsoDsg4nsnbQg7JmE66OM65CY7JeI7Iq164uI64ukLicsXG4gICAgICBzZWFyY2hlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9KVxuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignUHJpY2Ugc2VhcmNoIGVycm9yOicsIGVycm9yKVxuICAgIFxuICAgIC8vIOyYpOulmCDsi5wg66qp7JeFIOuNsOydtO2EsCDrsJjtmZhcbiAgICBjb25zdCB7IHByb2R1Y3ROYW1lLCBjYXRlZ29yeSwgdGFyZ2V0UHJpY2UgfSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXG4gICAgY29uc3QgbW9ja1Jlc3BvbnNlID0gZ2VuZXJhdGVNb2NrUHJpY2VEYXRhKHByb2R1Y3ROYW1lLCBjYXRlZ29yeSwgdGFyZ2V0UHJpY2UpXG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiBtb2NrUmVzcG9uc2UsXG4gICAgICBtZXNzYWdlOiAn6rCA6rKpIOqygOyDieydtCDsmYTro4zrkJjsl4jsirXri4jri6QuICjrqqnsl4Ug642w7J207YSwKScsXG4gICAgICB3YXJuaW5nOiAn7Iuk7KCcIOqygOyDiSDspJEg7Jik66WY6rCAIOuwnOyDne2VmOyXrCDsmIjsg4Eg642w7J207YSw66W8IOygnOqzte2VqeuLiOuLpC4nXG4gICAgfSlcbiAgfVxufVxuXG4vLyDrqqnsl4Ug642w7J207YSwIOyDneyEsSDtlajsiJhcbmZ1bmN0aW9uIGdlbmVyYXRlTW9ja1ByaWNlRGF0YShwcm9kdWN0TmFtZTogc3RyaW5nLCBjYXRlZ29yeTogc3RyaW5nLCB0YXJnZXRQcmljZT86IG51bWJlcikge1xuICBjb25zdCBiYXNlUHJpY2UgPSB0YXJnZXRQcmljZSB8fCBnZXRCYXNlUHJpY2VCeUNhdGVnb3J5KGNhdGVnb3J5KVxuICBjb25zdCBwbGF0Zm9ybXMgPSBbJ+uEpOydtOuyhOyHvO2VkScsICfsv6DtjKEnLCAnMTHrsojqsIAnLCAnR+uniOy8kycsICfsmKXshZgnLCAn7J247YSw7YyM7YGsJywgJ+uhr+uNsOyYqCcsICfsnITrqZTtlIQnXVxuICBcbiAgY29uc3Qgc291cmNlcyA9IHBsYXRmb3Jtcy5zbGljZSgwLCA2KS5tYXAoKHBsYXRmb3JtKSA9PiB7XG4gICAgY29uc3QgcHJpY2VWYXJpYXRpb24gPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiAwLjMgLy8gwrExNSUg67OA64+ZXG4gICAgY29uc3QgcHJpY2UgPSBNYXRoLnJvdW5kKGJhc2VQcmljZSAqICgxICsgcHJpY2VWYXJpYXRpb24pKVxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBwbGF0Zm9ybSxcbiAgICAgIHByaWNlLFxuICAgICAgdXJsOiBgaHR0cHM6Ly9zaG9wcGluZy4ke3BsYXRmb3JtLnRvTG93ZXJDYXNlKCl9LmNvbS9zZWFyY2g/cT0ke2VuY29kZVVSSUNvbXBvbmVudChwcm9kdWN0TmFtZSl9YCxcbiAgICAgIGF2YWlsYWJpbGl0eTogTWF0aC5yYW5kb20oKSA+IDAuMSwgLy8gOTAlIO2ZleuloOuhnCDsnqzqs6Ag7J6I7J2MXG4gICAgICBzaGlwcGluZzogTWF0aC5yYW5kb20oKSA+IDAuNSA/IDAgOiAzMDAwLFxuICAgICAgcmF0aW5nOiBNYXRoLnJvdW5kKCgzLjUgKyBNYXRoLnJhbmRvbSgpICogMS41KSAqIDEwKSAvIDEwXG4gICAgfVxuICB9KVxuXG4gIGNvbnN0IHByaWNlcyA9IHNvdXJjZXMubWFwKHMgPT4gcy5wcmljZSlcbiAgY29uc3QgYXZlcmFnZVByaWNlID0gTWF0aC5yb3VuZChwcmljZXMucmVkdWNlKChzdW0sIHByaWNlKSA9PiBzdW0gKyBwcmljZSwgMCkgLyBwcmljZXMubGVuZ3RoKVxuICBjb25zdCBsb3dlc3RQcmljZSA9IE1hdGgubWluKC4uLnByaWNlcylcbiAgY29uc3QgcmVjb21tZW5kZWRQbGF0Zm9ybSA9IHNvdXJjZXMuZmluZChzID0+IHMucHJpY2UgPT09IGxvd2VzdFByaWNlKT8ucGxhdGZvcm0gfHwgc291cmNlc1swXS5wbGF0Zm9ybVxuXG4gIHJldHVybiB7XG4gICAgcHJvZHVjdE5hbWUsXG4gICAgY2F0ZWdvcnksXG4gICAgc291cmNlczogc291cmNlcy5zb3J0KChhLCBiKSA9PiBhLnByaWNlIC0gYi5wcmljZSksXG4gICAgYXZlcmFnZVByaWNlLFxuICAgIGxvd2VzdFByaWNlLFxuICAgIHJlY29tbWVuZGVkUGxhdGZvcm1cbiAgfVxufVxuXG4vLyDsubTthYzqs6Drpqzrs4Qg6riw67O4IOqwgOqyqSDstpTsoJVcbmZ1bmN0aW9uIGdldEJhc2VQcmljZUJ5Q2F0ZWdvcnkoY2F0ZWdvcnk6IHN0cmluZyk6IG51bWJlciB7XG4gIGNvbnN0IGNhdGVnb3J5UHJpY2VzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge1xuICAgICfsmKjrnbzsnbjsh7ztlZEnOiA1MDAwMCxcbiAgICAn7Y647J2Y7KCQJzogMzAwMCxcbiAgICAn66eI7Yq4JzogMTUwMDAsXG4gICAgJ+uwse2ZlOygkCc6IDEwMDAwMCxcbiAgICAn7Lm07Y6YJzogNTAwMCxcbiAgICAn67Cw64us7J2M7IudJzogMjAwMDAsXG4gICAgJ+yEnOygkCc6IDE1MDAwLFxuICAgICfsmIHtmZTqtIAnOiAxMjAwMCxcbiAgICAn6riw7YOAJzogMzAwMDBcbiAgfVxuICBcbiAgcmV0dXJuIGNhdGVnb3J5UHJpY2VzW2NhdGVnb3J5XSB8fCAzMDAwMFxufVxuXG4vLyDsnZHri7Ug6rWs7KGwIOqygOymnSDtlajsiJhcbmZ1bmN0aW9uIHZhbGlkYXRlUHJpY2VTZWFyY2hSZXNwb25zZShkYXRhOiBhbnkpOiBib29sZWFuIHtcbiAgaWYgKCFkYXRhIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGZhbHNlXG4gIFxuICBjb25zdCByZXF1aXJlZCA9IFsncHJvZHVjdE5hbWUnLCAnY2F0ZWdvcnknLCAnc291cmNlcycsICdhdmVyYWdlUHJpY2UnLCAnbG93ZXN0UHJpY2UnLCAncmVjb21tZW5kZWRQbGF0Zm9ybSddXG4gIGlmICghcmVxdWlyZWQuZXZlcnkoZmllbGQgPT4gZmllbGQgaW4gZGF0YSkpIHJldHVybiBmYWxzZVxuICBcbiAgaWYgKCFBcnJheS5pc0FycmF5KGRhdGEuc291cmNlcykgfHwgZGF0YS5zb3VyY2VzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGZhbHNlXG4gIFxuICByZXR1cm4gZGF0YS5zb3VyY2VzLmV2ZXJ5KChzb3VyY2U6IGFueSkgPT4gXG4gICAgc291cmNlICYmIFxuICAgIHR5cGVvZiBzb3VyY2UucGxhdGZvcm0gPT09ICdzdHJpbmcnICYmXG4gICAgdHlwZW9mIHNvdXJjZS5wcmljZSA9PT0gJ251bWJlcicgJiZcbiAgICB0eXBlb2Ygc291cmNlLnVybCA9PT0gJ3N0cmluZycgJiZcbiAgICB0eXBlb2Ygc291cmNlLmF2YWlsYWJpbGl0eSA9PT0gJ2Jvb2xlYW4nICYmXG4gICAgdHlwZW9mIHNvdXJjZS5zaGlwcGluZyA9PT0gJ251bWJlcicgJiZcbiAgICAoc291cmNlLnJhdGluZyA9PT0gdW5kZWZpbmVkIHx8IHR5cGVvZiBzb3VyY2UucmF0aW5nID09PSAnbnVtYmVyJylcbiAgKVxufVxuXG4vLyDrjbDsnbTthLAg7ZKI7KeIIOqygOymnSDrsI8g67O07KCVIO2VqOyImFxuZnVuY3Rpb24gc2FuaXRpemVQcmljZURhdGEoZGF0YTogYW55LCBwcm9kdWN0TmFtZTogc3RyaW5nLCBjYXRlZ29yeTogc3RyaW5nKTogYW55IHtcbiAgLy8g6riw67O4IO2VhOuTnCDrs7TsoJVcbiAgZGF0YS5wcm9kdWN0TmFtZSA9IGRhdGEucHJvZHVjdE5hbWUgfHwgcHJvZHVjdE5hbWVcbiAgZGF0YS5jYXRlZ29yeSA9IGRhdGEuY2F0ZWdvcnkgfHwgY2F0ZWdvcnlcbiAgXG4gIC8vIHNvdXJjZXMg67Cw7Je0IOygleumrCDrsI8g6rKA7KadXG4gIGlmIChBcnJheS5pc0FycmF5KGRhdGEuc291cmNlcykpIHtcbiAgICBkYXRhLnNvdXJjZXMgPSBkYXRhLnNvdXJjZXNcbiAgICAgIC5maWx0ZXIoKHNvdXJjZTogYW55KSA9PiBzb3VyY2UgJiYgc291cmNlLnBsYXRmb3JtICYmIHR5cGVvZiBzb3VyY2UucHJpY2UgPT09ICdudW1iZXInKVxuICAgICAgLm1hcCgoc291cmNlOiBhbnkpID0+ICh7XG4gICAgICAgIHBsYXRmb3JtOiBTdHJpbmcoc291cmNlLnBsYXRmb3JtKSxcbiAgICAgICAgcHJpY2U6IE1hdGgubWF4KDAsIE1hdGgucm91bmQoTnVtYmVyKHNvdXJjZS5wcmljZSkpKSxcbiAgICAgICAgdXJsOiBzYW5pdGl6ZVVybChzb3VyY2UudXJsLCBzb3VyY2UucGxhdGZvcm0sIHByb2R1Y3ROYW1lKSxcbiAgICAgICAgYXZhaWxhYmlsaXR5OiBzb3VyY2UuYXZhaWxhYmlsaXR5ICE9PSBmYWxzZSxcbiAgICAgICAgc2hpcHBpbmc6IE1hdGgubWF4KDAsIE1hdGgucm91bmQoTnVtYmVyKHNvdXJjZS5zaGlwcGluZyB8fCAwKSkpLFxuICAgICAgICByYXRpbmc6IHNvdXJjZS5yYXRpbmcgPyBNYXRoLm1pbig1LjAsIE1hdGgubWF4KDEuMCwgTnVtYmVyKHNvdXJjZS5yYXRpbmcpKSkgOiB1bmRlZmluZWRcbiAgICAgIH0pKVxuICAgICAgLnNsaWNlKDAsIDgpIC8vIOy1nOuMgCA46rCc66GcIOygnO2VnFxuICB9XG4gIFxuICAvLyDqsIDqsqkg7Ya16rOEIOyerOqzhOyCsFxuICBpZiAoZGF0YS5zb3VyY2VzICYmIGRhdGEuc291cmNlcy5sZW5ndGggPiAwKSB7XG4gICAgY29uc3QgcHJpY2VzID0gZGF0YS5zb3VyY2VzLm1hcCgoczogYW55KSA9PiBzLnByaWNlKVxuICAgIGRhdGEuYXZlcmFnZVByaWNlID0gTWF0aC5yb3VuZChwcmljZXMucmVkdWNlKChzdW06IG51bWJlciwgcHJpY2U6IG51bWJlcikgPT4gc3VtICsgcHJpY2UsIDApIC8gcHJpY2VzLmxlbmd0aClcbiAgICBkYXRhLmxvd2VzdFByaWNlID0gTWF0aC5taW4oLi4ucHJpY2VzKVxuICAgIGRhdGEucmVjb21tZW5kZWRQbGF0Zm9ybSA9IGRhdGEuc291cmNlcy5maW5kKChzOiBhbnkpID0+IHMucHJpY2UgPT09IGRhdGEubG93ZXN0UHJpY2UpPy5wbGF0Zm9ybSB8fCBkYXRhLnNvdXJjZXNbMF0ucGxhdGZvcm1cbiAgfVxuICBcbiAgcmV0dXJuIGRhdGFcbn1cblxuLy8gVVJMIOygleumrCDrsI8g6rKA7KadIO2VqOyImFxuZnVuY3Rpb24gc2FuaXRpemVVcmwodXJsOiBzdHJpbmcsIHBsYXRmb3JtOiBzdHJpbmcsIHByb2R1Y3ROYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICBpZiAoIXVybCB8fCB0eXBlb2YgdXJsICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBnZXREZWZhdWx0VXJsKHBsYXRmb3JtLCBwcm9kdWN0TmFtZSlcbiAgfVxuICBcbiAgLy8gVVJMIOq4uOydtOqwgCAyMDDsnpDrpbwg7LSI6rO87ZWY66m0IOq4sOuzuCBVUkwg7IKs7JqpXG4gIGlmICh1cmwubGVuZ3RoID4gMjAwKSB7XG4gICAgcmV0dXJuIGdldERlZmF1bHRVcmwocGxhdGZvcm0sIHByb2R1Y3ROYW1lKVxuICB9XG4gIFxuICByZXR1cm4gdXJsXG59XG5cbi8vIOq4sOuzuCBVUkwg7IOd7ISxIO2VqOyImFxuZnVuY3Rpb24gZ2V0RGVmYXVsdFVybChwbGF0Zm9ybTogc3RyaW5nLCBwcm9kdWN0TmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgZW5jb2RlZFByb2R1Y3QgPSBlbmNvZGVVUklDb21wb25lbnQocHJvZHVjdE5hbWUpXG4gIFxuICBjb25zdCB1cmxNYXA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgJ+uEpOydtOuyhOyHvO2VkSc6IGBodHRwczovL3NlYXJjaC5zaG9wcGluZy5uYXZlci5jb20vc2VhcmNoL2FsbD9xdWVyeT0ke2VuY29kZWRQcm9kdWN0fWAsXG4gICAgJ+y/oO2MoSc6IGBodHRwczovL3d3dy5jb3VwYW5nLmNvbS9ucC9zZWFyY2g/cT0ke2VuY29kZWRQcm9kdWN0fWAsXG4gICAgJzEx67KI6rCAJzogYGh0dHBzOi8vc2VhcmNoLjExc3QuY28ua3IvU2VhcmNoLnRtYWxsP2t3ZD0ke2VuY29kZWRQcm9kdWN0fWAsXG4gICAgJ0frp4jsvJMnOiBgaHR0cDovL3NlYXJjaC5nbWFya2V0LmNvLmtyL3NlYXJjaC5hc3B4P2tleXdvcmQ9JHtlbmNvZGVkUHJvZHVjdH1gLFxuICAgICfsmKXshZgnOiBgaHR0cDovL3NlYXJjaC5hdWN0aW9uLmNvLmtyL3NlYXJjaC9zZWFyY2guYXNweD9rZXl3b3JkPSR7ZW5jb2RlZFByb2R1Y3R9YCxcbiAgICAn7J247YSw7YyM7YGsJzogYGh0dHA6Ly9zaG9wcGluZy5pbnRlcnBhcmsuY29tL3NlYXJjaD9xPSR7ZW5jb2RlZFByb2R1Y3R9YCxcbiAgICAn66Gv642w7JioJzogYGh0dHBzOi8vd3d3LmxvdHRlb24uY29tL3NlYXJjaC9zZWFyY2gvc2VhcmNoLmVjbj9xPSR7ZW5jb2RlZFByb2R1Y3R9YFxuICB9XG4gIFxuICByZXR1cm4gdXJsTWFwW3BsYXRmb3JtXSB8fCBgaHR0cHM6Ly9zZWFyY2guc2hvcHBpbmcubmF2ZXIuY29tL3NlYXJjaC9hbGw/cXVlcnk9JHtlbmNvZGVkUHJvZHVjdH1gXG59Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIk9wZW5BSSIsIm9wZW5haSIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJPUEVOQUlfQVBJX0tFWSIsIlBPU1QiLCJyZXF1ZXN0IiwiYm9keSIsImpzb24iLCJwcm9kdWN0TmFtZSIsImNhdGVnb3J5IiwidGFyZ2V0UHJpY2UiLCJzdWNjZXNzIiwiZXJyb3IiLCJzdGF0dXMiLCJtb2NrUmVzcG9uc2UiLCJnZW5lcmF0ZU1vY2tQcmljZURhdGEiLCJkYXRhIiwibWVzc2FnZSIsInByb21wdCIsInRvTG9jYWxlU3RyaW5nIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiY29tcGxldGlvbiIsImNoYXQiLCJjb21wbGV0aW9ucyIsImNyZWF0ZSIsIm1vZGVsIiwibWVzc2FnZXMiLCJyb2xlIiwiY29udGVudCIsIm1heF90b2tlbnMiLCJ0ZW1wZXJhdHVyZSIsInJlc3BvbnNlVGV4dCIsImNob2ljZXMiLCJjb25zb2xlIiwibG9nIiwiRXJyb3IiLCJwcmljZURhdGEiLCJjbGVhbmVkUmVzcG9uc2UiLCJyZXBsYWNlIiwidHJpbSIsIkpTT04iLCJwYXJzZSIsInZhbGlkYXRlUHJpY2VTZWFyY2hSZXNwb25zZSIsInNhbml0aXplUHJpY2VEYXRhIiwicGFyc2VFcnJvciIsInNlYXJjaGVkQXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJ3YXJuaW5nIiwiYmFzZVByaWNlIiwiZ2V0QmFzZVByaWNlQnlDYXRlZ29yeSIsInBsYXRmb3JtcyIsInNvdXJjZXMiLCJzbGljZSIsIm1hcCIsInBsYXRmb3JtIiwicHJpY2VWYXJpYXRpb24iLCJNYXRoIiwicmFuZG9tIiwicHJpY2UiLCJyb3VuZCIsInVybCIsInRvTG93ZXJDYXNlIiwiYXZhaWxhYmlsaXR5Iiwic2hpcHBpbmciLCJyYXRpbmciLCJwcmljZXMiLCJzIiwiYXZlcmFnZVByaWNlIiwicmVkdWNlIiwic3VtIiwibGVuZ3RoIiwibG93ZXN0UHJpY2UiLCJtaW4iLCJyZWNvbW1lbmRlZFBsYXRmb3JtIiwiZmluZCIsInNvcnQiLCJhIiwiYiIsImNhdGVnb3J5UHJpY2VzIiwicmVxdWlyZWQiLCJldmVyeSIsImZpZWxkIiwiQXJyYXkiLCJpc0FycmF5Iiwic291cmNlIiwidW5kZWZpbmVkIiwiZmlsdGVyIiwiU3RyaW5nIiwibWF4IiwiTnVtYmVyIiwic2FuaXRpemVVcmwiLCJnZXREZWZhdWx0VXJsIiwiZW5jb2RlZFByb2R1Y3QiLCJ1cmxNYXAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/price-search/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/formdata-node","vendor-chunks/openai","vendor-chunks/form-data-encoder","vendor-chunks/whatwg-url","vendor-chunks/agentkeepalive","vendor-chunks/tr46","vendor-chunks/web-streams-polyfill","vendor-chunks/node-fetch","vendor-chunks/webidl-conversions","vendor-chunks/ms","vendor-chunks/humanize-ms","vendor-chunks/event-target-shim","vendor-chunks/abort-controller"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprice-search%2Froute&page=%2Fapi%2Fprice-search%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprice-search%2Froute.ts&appDir=%2FUsers%2Fiseulgi%2FDesktop%2FProject%2Fepisode%2Fend%2Fclaude%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fiseulgi%2FDesktop%2FProject%2Fepisode%2Fend%2Fclaude&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();