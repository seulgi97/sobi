"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/price-search/route";
exports.ids = ["app/api/price-search/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprice-search%2Froute&page=%2Fapi%2Fprice-search%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprice-search%2Froute.ts&appDir=%2FUsers%2Fiseulgi%2FDesktop%2FProject%2Fepisode%2Fend%2Fclaude%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fiseulgi%2FDesktop%2FProject%2Fepisode%2Fend%2Fclaude&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprice-search%2Froute&page=%2Fapi%2Fprice-search%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprice-search%2Froute.ts&appDir=%2FUsers%2Fiseulgi%2FDesktop%2FProject%2Fepisode%2Fend%2Fclaude%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fiseulgi%2FDesktop%2FProject%2Fepisode%2Fend%2Fclaude&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_iseulgi_Desktop_Project_episode_end_claude_src_app_api_price_search_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/price-search/route.ts */ \"(rsc)/./src/app/api/price-search/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/price-search/route\",\n        pathname: \"/api/price-search\",\n        filename: \"route\",\n        bundlePath: \"app/api/price-search/route\"\n    },\n    resolvedPagePath: \"/Users/iseulgi/Desktop/Project/episode/end/claude/src/app/api/price-search/route.ts\",\n    nextConfigOutput,\n    userland: _Users_iseulgi_Desktop_Project_episode_end_claude_src_app_api_price_search_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/price-search/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwcmljZS1zZWFyY2glMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnByaWNlLXNlYXJjaCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnByaWNlLXNlYXJjaCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmlzZXVsZ2klMkZEZXNrdG9wJTJGUHJvamVjdCUyRmVwaXNvZGUlMkZlbmQlMkZjbGF1ZGUlMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGaXNldWxnaSUyRkRlc2t0b3AlMkZQcm9qZWN0JTJGZXBpc29kZSUyRmVuZCUyRmNsYXVkZSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDbUM7QUFDaEg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zb2JpLXBheW1lbnQtcGxhdGZvcm0vP2QyMmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2lzZXVsZ2kvRGVza3RvcC9Qcm9qZWN0L2VwaXNvZGUvZW5kL2NsYXVkZS9zcmMvYXBwL2FwaS9wcmljZS1zZWFyY2gvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3ByaWNlLXNlYXJjaC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3ByaWNlLXNlYXJjaFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvcHJpY2Utc2VhcmNoL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2lzZXVsZ2kvRGVza3RvcC9Qcm9qZWN0L2VwaXNvZGUvZW5kL2NsYXVkZS9zcmMvYXBwL2FwaS9wcmljZS1zZWFyY2gvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3ByaWNlLXNlYXJjaC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprice-search%2Froute&page=%2Fapi%2Fprice-search%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprice-search%2Froute.ts&appDir=%2FUsers%2Fiseulgi%2FDesktop%2FProject%2Fepisode%2Fend%2Fclaude%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fiseulgi%2FDesktop%2FProject%2Fepisode%2Fend%2Fclaude&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/price-search/route.ts":
/*!*******************************************!*\
  !*** ./src/app/api/price-search/route.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n\n\n// OpenAI 클라이언트 초기화 (환경변수에서 API 키 읽기)\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY || \"\"\n});\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const { productName, category, targetPrice, location, userPaymentMethods } = body;\n        // 기본 검증\n        if (!productName || !category) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"상품명과 카테고리는 필수입니다.\"\n            }, {\n                status: 400\n            });\n        }\n        // OpenAI API 키가 없는 경우 목업 데이터 반환\n        if (!process.env.OPENAI_API_KEY) {\n            const mockResponse = generateMockPriceData(productName, category, targetPrice);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                data: mockResponse,\n                message: \"가격 검색이 완료되었습니다. (목업 데이터)\"\n            });\n        }\n        // 온라인/오프라인 구분하여 프롬프트 생성\n        const isOffline = [\n            \"편의점\",\n            \"마트\",\n            \"백화점\",\n            \"카페\",\n            \"주유소\",\n            \"병원\",\n            \"약국\",\n            \"미용실\",\n            \"헬스장\"\n        ].includes(category);\n        const prompt = isOffline ? `\n다음 상품/서비스에 대한 오프라인 매장 정보와 결제수단별 혜택을 정확한 JSON 형태로 제공해주세요.\n\n상품/서비스 정보:\n- 상품명: \"${productName}\"\n- 카테고리: \"${category}\"\n${location ? `- 지역: ${location}` : \"\"}\n${targetPrice ? `- 목표 가격: ${targetPrice.toLocaleString()}원` : \"\"}\n\n요구사항:\n1. 반드시 유효한 JSON 형태로만 응답하세요\n2. 가격은 반드시 숫자 타입으로 설정하세요\n3. 결제수단별 혜택을 포함하세요\n4. 실제 매장 체인명을 사용하세요\n\nJSON 형태:\n{\n  \"productName\": \"${productName}\",\n  \"category\": \"${category}\",\n  \"sources\": [\n    {\n      \"platform\": \"매장명 (예: GS25, 세븐일레븐, 롯데마트, 스타벅스 등)\",\n      \"price\": 숫자,\n      \"url\": \"매장 홈페이지 또는 앱 링크\",\n      \"availability\": true,\n      \"shipping\": 0,\n      \"rating\": 소수점포함숫자,\n      \"paymentBenefits\": [\n        {\"method\": \"결제수단명\", \"discount\": 할인금액, \"description\": \"혜택설명\"}\n      ]\n    }\n  ],\n  \"averagePrice\": 숫자,\n  \"lowestPrice\": 숫자,\n  \"recommendedPlatform\": \"최저가매장명\"\n}\n\n포함할 매장: ${category}에 맞는 실제 브랜드 매장들\n${category === \"카페\" ? `\n카페 브랜드: 스타벅스, 이디야, 메가커피, 컴포즈커피, 탐앤탐스, 할리스, 투썸플레이스, 커피빈, 엔젤리너스, 빽다방, 폴바셋, 파스쿠찌, 카페베네, 커피나무, 그라찌에, 드롭탑, 더벤티, 매머드커피, 커피에반하다, 니코스케이터\n` : \"\"}\n- 결제수단별 할인혜택 포함 (신용카드, 간편결제, 멤버십 등)\n- ${category} 카테고리에 적합한 합리적인 가격 범위 사용\n\n중요: JSON 형태 외에는 다른 텍스트를 포함하지 마세요.` : `\n다음 상품에 대한 온라인 쇼핑몰별 가격 정보를 정확한 JSON 형태로 제공해주세요.\n\n상품 정보:\n- 상품명: \"${productName}\"\n- 카테고리: \"${category}\"\n${targetPrice ? `- 목표 가격: ${targetPrice.toLocaleString()}원` : \"\"}\n\n요구사항:\n1. 반드시 유효한 JSON 형태로만 응답하세요\n2. 가격은 반드시 숫자 타입으로 설정하세요\n3. URL은 간단하고 짧은 형태로 생성하세요 (200자 이내)\n4. 평점은 1.0-5.0 사이의 숫자로 설정하세요\n5. 긴 URL 매개변수를 피하고 기본 검색 URL만 사용하세요\n\nJSON 형태 (이 형태를 정확히 따라주세요):\n{\n  \"productName\": \"${productName}\",\n  \"category\": \"${category}\",\n  \"sources\": [\n    {\n      \"platform\": \"쇼핑몰명\",\n      \"price\": 숫자,\n      \"url\": \"https://도메인/search?q=${encodeURIComponent(productName)}\",\n      \"availability\": true,\n      \"shipping\": 숫자,\n      \"rating\": 소수점포함숫자\n    }\n  ],\n  \"averagePrice\": 숫자,\n  \"lowestPrice\": 숫자,\n  \"recommendedPlatform\": \"최저가플랫폼명\"\n}\n\n포함할 쇼핑몰: 네이버쇼핑, 쿠팡, 11번가, G마켓, 옥션, 인터파크, 롯데온\n- 6-7개 결과 제공\n- ${category} 카테고리에 적합한 합리적인 가격 범위 사용\n- 배송비는 0원 또는 2500-3000원 중 설정\n- 재고는 대부분 available로 설정 (90% 이상)\n\n중요: JSON 형태 외에는 다른 텍스트를 포함하지 마세요.`;\n        const completion = await openai.chat.completions.create({\n            model: \"gpt-3.5-turbo\",\n            messages: [\n                {\n                    role: \"system\",\n                    content: \"당신은 온라인 쇼핑 가격 비교 전문가입니다. 사용자가 요청한 상품의 가격 정보를 정확한 JSON 형태로 제공합니다.\"\n                },\n                {\n                    role: \"user\",\n                    content: prompt\n                }\n            ],\n            max_tokens: 2000,\n            temperature: 0.1\n        });\n        const responseText = completion.choices[0]?.message?.content;\n        console.log(\"OpenAI API Response:\", responseText);\n        if (!responseText) {\n            throw new Error(\"OpenAI API에서 응답을 받지 못했습니다.\");\n        }\n        // JSON 파싱 및 응답 검증\n        let priceData;\n        try {\n            // JSON 응답에서 불필요한 텍스트 제거\n            const cleanedResponse = responseText.replace(/```json\\n?/g, \"\").replace(/```\\n?/g, \"\").trim();\n            priceData = JSON.parse(cleanedResponse);\n            // 응답 구조 검증\n            if (!validatePriceSearchResponse(priceData)) {\n                throw new Error(\"응답 형식이 올바르지 않습니다.\");\n            }\n            // 데이터 품질 검증 및 보정\n            priceData = sanitizePriceData(priceData, productName, category);\n        } catch (parseError) {\n            console.error(\"JSON parsing or validation error:\", parseError);\n            console.error(\"Original response:\", responseText);\n            // JSON 파싱 또는 검증 실패 시 목업 데이터 반환\n            priceData = generateMockPriceData(productName, category, targetPrice);\n        }\n        // 사용자 결제수단을 고려한 실제 최저가 계산\n        if (userPaymentMethods && userPaymentMethods.length > 0) {\n            priceData = calculateActualBestPrices(priceData, userPaymentMethods, category);\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: priceData,\n            message: \"가격 검색이 완료되었습니다.\",\n            searchedAt: new Date().toISOString()\n        });\n    } catch (error) {\n        console.error(\"Price search error:\", error);\n        // 오류 시 목업 데이터 반환\n        const { productName, category, targetPrice } = await request.json();\n        const mockResponse = generateMockPriceData(productName, category, targetPrice);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: mockResponse,\n            message: \"가격 검색이 완료되었습니다. (목업 데이터)\",\n            warning: \"실제 검색 중 오류가 발생하여 예상 데이터를 제공합니다.\"\n        });\n    }\n}\n// 목업 데이터 생성 함수\nfunction generateMockPriceData(productName, category, targetPrice) {\n    const basePrice = targetPrice || getBasePriceByCategory(category);\n    // 카테고리별 플랫폼 설정\n    const getPlatformsByCategory = (cat)=>{\n        switch(cat){\n            case \"카페\":\n                return [\n                    \"스타벅스\",\n                    \"메가커피\",\n                    \"이디야\",\n                    \"컴포즈커피\",\n                    \"탐앤탐스\",\n                    \"할리스\",\n                    \"투썸플레이스\",\n                    \"빽다방\",\n                    \"엔젤리너스\",\n                    \"폴바셋\"\n                ];\n            case \"편의점\":\n                return [\n                    \"GS25\",\n                    \"세븐일레븐\",\n                    \"CU\",\n                    \"이마트24\",\n                    \"미니스톱\"\n                ];\n            case \"마트\":\n                return [\n                    \"이마트\",\n                    \"홈플러스\",\n                    \"롯데마트\",\n                    \"코스트코\",\n                    \"농협하나로마트\"\n                ];\n            case \"백화점\":\n                return [\n                    \"롯데백화점\",\n                    \"신세계백화점\",\n                    \"현대백화점\",\n                    \"갤러리아\"\n                ];\n            case \"주유소\":\n                return [\n                    \"SK에너지\",\n                    \"GS칼텍스\",\n                    \"S-Oil\",\n                    \"현대오일뱅크\"\n                ];\n            default:\n                return [\n                    \"네이버쇼핑\",\n                    \"쿠팡\",\n                    \"11번가\",\n                    \"G마켓\",\n                    \"옥션\",\n                    \"인터파크\",\n                    \"롯데온\",\n                    \"위메프\"\n                ];\n        }\n    };\n    const platforms = getPlatformsByCategory(category);\n    const sources = platforms.slice(0, 6).map((platform)=>{\n        const priceVariation = (Math.random() - 0.5) * 0.3 // ±15% 변동\n        ;\n        const price = Math.round(basePrice * (1 + priceVariation));\n        return {\n            platform,\n            price,\n            url: `https://shopping.${platform.toLowerCase()}.com/search?q=${encodeURIComponent(productName)}`,\n            availability: Math.random() > 0.1,\n            shipping: Math.random() > 0.5 ? 0 : 3000,\n            rating: Math.round((3.5 + Math.random() * 1.5) * 10) / 10\n        };\n    });\n    const prices = sources.map((s)=>s.price);\n    const averagePrice = Math.round(prices.reduce((sum, price)=>sum + price, 0) / prices.length);\n    const lowestPrice = Math.min(...prices);\n    const recommendedPlatform = sources.find((s)=>s.price === lowestPrice)?.platform || sources[0].platform;\n    return {\n        productName,\n        category,\n        sources: sources.sort((a, b)=>a.price - b.price),\n        averagePrice,\n        lowestPrice,\n        recommendedPlatform\n    };\n}\n// 카테고리별 기본 가격 추정\nfunction getBasePriceByCategory(category) {\n    const categoryPrices = {\n        \"온라인쇼핑\": 50000,\n        \"편의점\": 2000,\n        \"마트\": 15000,\n        \"백화점\": 100000,\n        \"카페\": 4000,\n        \"배달음식\": 20000,\n        \"서점\": 15000,\n        \"영화관\": 12000,\n        \"주유소\": 1600,\n        \"병원\": 30000,\n        \"약국\": 8000,\n        \"헬스장\": 80000,\n        \"기타\": 30000\n    };\n    return categoryPrices[category] || 30000;\n}\n// 응답 구조 검증 함수\nfunction validatePriceSearchResponse(data) {\n    if (!data || typeof data !== \"object\") return false;\n    const required = [\n        \"productName\",\n        \"category\",\n        \"sources\",\n        \"averagePrice\",\n        \"lowestPrice\",\n        \"recommendedPlatform\"\n    ];\n    if (!required.every((field)=>field in data)) return false;\n    if (!Array.isArray(data.sources) || data.sources.length === 0) return false;\n    return data.sources.every((source)=>source && typeof source.platform === \"string\" && typeof source.price === \"number\" && typeof source.url === \"string\" && typeof source.availability === \"boolean\" && typeof source.shipping === \"number\" && (source.rating === undefined || typeof source.rating === \"number\"));\n}\n// 데이터 품질 검증 및 보정 함수\nfunction sanitizePriceData(data, productName, category) {\n    // 기본 필드 보정\n    data.productName = data.productName || productName;\n    data.category = data.category || category;\n    // sources 배열 정리 및 검증\n    if (Array.isArray(data.sources)) {\n        data.sources = data.sources.filter((source)=>source && source.platform && typeof source.price === \"number\").map((source)=>({\n                platform: String(source.platform),\n                price: Math.max(0, Math.round(Number(source.price))),\n                url: sanitizeUrl(source.url, source.platform, productName),\n                availability: source.availability !== false,\n                shipping: Math.max(0, Math.round(Number(source.shipping || 0))),\n                rating: source.rating ? Math.min(5.0, Math.max(1.0, Number(source.rating))) : undefined\n            })).slice(0, 8) // 최대 8개로 제한\n        ;\n    }\n    // 가격 통계 재계산\n    if (data.sources && data.sources.length > 0) {\n        const prices = data.sources.map((s)=>s.price);\n        data.averagePrice = Math.round(prices.reduce((sum, price)=>sum + price, 0) / prices.length);\n        data.lowestPrice = Math.min(...prices);\n        data.recommendedPlatform = data.sources.find((s)=>s.price === data.lowestPrice)?.platform || data.sources[0].platform;\n    }\n    return data;\n}\n// URL 정리 및 검증 함수\nfunction sanitizeUrl(url, platform, productName) {\n    if (!url || typeof url !== \"string\") {\n        return getDefaultUrl(platform, productName);\n    }\n    // URL 길이가 200자를 초과하면 기본 URL 사용\n    if (url.length > 200) {\n        return getDefaultUrl(platform, productName);\n    }\n    return url;\n}\n// 기본 URL 생성 함수\nfunction getDefaultUrl(platform, productName) {\n    const encodedProduct = encodeURIComponent(productName);\n    const urlMap = {\n        \"네이버쇼핑\": `https://search.shopping.naver.com/search/all?query=${encodedProduct}`,\n        \"쿠팡\": `https://www.coupang.com/np/search?q=${encodedProduct}`,\n        \"11번가\": `https://search.11st.co.kr/Search.tmall?kwd=${encodedProduct}`,\n        \"G마켓\": `http://search.gmarket.co.kr/search.aspx?keyword=${encodedProduct}`,\n        \"옥션\": `http://search.auction.co.kr/search/search.aspx?keyword=${encodedProduct}`,\n        \"인터파크\": `http://shopping.interpark.com/search?q=${encodedProduct}`,\n        \"롯데온\": `https://www.lotteon.com/search/search/search.ecn?q=${encodedProduct}`\n    };\n    return urlMap[platform] || `https://search.shopping.naver.com/search/all?query=${encodedProduct}`;\n}\n// 사용자 결제수단을 고려한 실제 최저가 계산\nfunction calculateActualBestPrices(data, userPaymentMethods, category) {\n    if (!data.sources || !Array.isArray(data.sources)) {\n        return data;\n    }\n    // 활성화된 결제수단만 필터링\n    const activePaymentMethods = userPaymentMethods.filter((pm)=>pm.isActive);\n    if (activePaymentMethods.length === 0) {\n        return data;\n    }\n    // 각 매장별로 최적의 결제수단과 실제 가격 계산\n    data.sources = data.sources.map((source)=>{\n        const bestPaymentOption = findBestPaymentMethod(source, activePaymentMethods, category);\n        if (bestPaymentOption) {\n            return {\n                ...source,\n                originalPrice: source.price,\n                actualPrice: bestPaymentOption.finalPrice,\n                bestPaymentMethod: bestPaymentOption.paymentMethod,\n                discount: bestPaymentOption.discount,\n                paymentBenefits: [\n                    {\n                        method: bestPaymentOption.paymentMethod.name,\n                        discount: bestPaymentOption.discount,\n                        description: `${bestPaymentOption.paymentMethod.name}로 결제시 ${bestPaymentOption.discount}원 할인`\n                    }\n                ]\n            };\n        }\n        return source;\n    });\n    // actualPrice 기준으로 정렬\n    data.sources.sort((a, b)=>{\n        const priceA = a.actualPrice || a.price;\n        const priceB = b.actualPrice || b.price;\n        return priceA - priceB;\n    });\n    // 최저가와 추천 플랫폼 업데이트\n    const lowestPriceSource = data.sources[0];\n    data.lowestPrice = lowestPriceSource.actualPrice || lowestPriceSource.price;\n    data.recommendedPlatform = lowestPriceSource.platform;\n    // 평균가격도 actualPrice 기준으로 재계산\n    const actualPrices = data.sources.map((s)=>s.actualPrice || s.price);\n    data.averagePrice = Math.round(actualPrices.reduce((sum, price)=>sum + price, 0) / actualPrices.length);\n    return data;\n}\n// 특정 매장에서 최적의 결제수단 찾기\nfunction findBestPaymentMethod(source, paymentMethods, category) {\n    let bestOption = null;\n    let maxDiscount = 0;\n    for (const pm of paymentMethods){\n        const discount = calculateDiscount(source.price, pm, category);\n        if (discount > maxDiscount) {\n            maxDiscount = discount;\n            bestOption = {\n                paymentMethod: pm,\n                discount: discount,\n                finalPrice: source.price - discount\n            };\n        }\n    }\n    return bestOption;\n}\n// 할인 금액 계산\nfunction calculateDiscount(originalPrice, paymentMethod, category) {\n    let discount = 0;\n    // 기본 할인율 적용\n    discount += originalPrice * paymentMethod.discountRate;\n    // 특별 카테고리 추가 할인 (cashback을 할인으로 계산)\n    if (paymentMethod.specialCategories.includes(category)) {\n        discount += originalPrice * paymentMethod.cashback;\n    }\n    return Math.round(discount);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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M0YsSUFBSWlILGFBQWE7SUFDakIsSUFBSUMsY0FBYztJQUVsQixLQUFLLE1BQU1wQixNQUFNa0IsZUFBZ0I7UUFDL0IsTUFBTVQsV0FBV1ksa0JBQWtCaEMsT0FBT3pCLEtBQUssRUFBRW9DLElBQUk5RjtRQUVyRCxJQUFJdUcsV0FBV1csYUFBYTtZQUMxQkEsY0FBY1g7WUFDZFUsYUFBYTtnQkFDWFgsZUFBZVI7Z0JBQ2ZTLFVBQVVBO2dCQUNWSCxZQUFZakIsT0FBT3pCLEtBQUssR0FBRzZDO1lBQzdCO1FBQ0Y7SUFDRjtJQUVBLE9BQU9VO0FBQ1Q7QUFFQSxXQUFXO0FBQ1gsU0FBU0Usa0JBQWtCakIsYUFBcUIsRUFBRUksYUFBNEIsRUFBRXRHLFFBQWdCO0lBQzlGLElBQUl1RyxXQUFXO0lBRWYsWUFBWTtJQUNaQSxZQUFZTCxnQkFBZ0JJLGNBQWNjLFlBQVk7SUFFdEQsb0NBQW9DO0lBQ3BDLElBQUlkLGNBQWNlLGlCQUFpQixDQUFDekcsUUFBUSxDQUFDWixXQUFXO1FBQ3REdUcsWUFBWUwsZ0JBQWdCSSxjQUFjZ0IsUUFBUTtJQUNwRDtJQUVBLE9BQU85RCxLQUFLRyxLQUFLLENBQUM0QztBQUNwQiIsInNvdXJjZXMiOlsid2VicGFjazovL3NvYmktcGF5bWVudC1wbGF0Zm9ybS8uL3NyYy9hcHAvYXBpL3ByaWNlLXNlYXJjaC9yb3V0ZS50cz8zZTMyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCBPcGVuQUkgZnJvbSAnb3BlbmFpJ1xuXG4vLyBPcGVuQUkg7YG065287J207Ja47Yq4IOy0iOq4sO2ZlCAo7ZmY6rK967OA7IiY7JeQ7IScIEFQSSDtgqQg7J296riwKVxuY29uc3Qgb3BlbmFpID0gbmV3IE9wZW5BSSh7XG4gIGFwaUtleTogcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVkgfHwgJycsXG59KVxuXG5pbnRlcmZhY2UgUGF5bWVudE1ldGhvZCB7XG4gIGlkOiBzdHJpbmdcbiAgbmFtZTogc3RyaW5nXG4gIHR5cGU6ICdjYXJkJyB8ICdwYXknIHwgJ2JhbmsnXG4gIGRpc2NvdW50UmF0ZTogbnVtYmVyXG4gIGNhc2hiYWNrOiBudW1iZXJcbiAgbW9udGhseUxpbWl0OiBudW1iZXJcbiAgc3BlY2lhbENhdGVnb3JpZXM6IHN0cmluZ1tdXG4gIGlzQWN0aXZlOiBib29sZWFuXG59XG5cbmludGVyZmFjZSBQcmljZVNlYXJjaFJlcXVlc3Qge1xuICBwcm9kdWN0TmFtZTogc3RyaW5nXG4gIGNhdGVnb3J5OiBzdHJpbmdcbiAgdGFyZ2V0UHJpY2U/OiBudW1iZXJcbiAgbG9jYXRpb24/OiBzdHJpbmdcbiAgdXNlclBheW1lbnRNZXRob2RzPzogUGF5bWVudE1ldGhvZFtdXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYm9keTogUHJpY2VTZWFyY2hSZXF1ZXN0ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcbiAgICBjb25zdCB7IHByb2R1Y3ROYW1lLCBjYXRlZ29yeSwgdGFyZ2V0UHJpY2UsIGxvY2F0aW9uLCB1c2VyUGF5bWVudE1ldGhvZHMgfSA9IGJvZHlcblxuICAgIC8vIOq4sOuzuCDqsoDspp1cbiAgICBpZiAoIXByb2R1Y3ROYW1lIHx8ICFjYXRlZ29yeSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6ICfsg4HtkojrqoXqs7wg7Lm07YWM6rOg66as64qUIO2VhOyImOyeheuLiOuLpC4nXG4gICAgICAgIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKVxuICAgIH1cblxuICAgIC8vIE9wZW5BSSBBUEkg7YKk6rCAIOyXhuuKlCDqsr3smrAg66qp7JeFIOuNsOydtO2EsCDrsJjtmZhcbiAgICBpZiAoIXByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZKSB7XG4gICAgICBjb25zdCBtb2NrUmVzcG9uc2UgPSBnZW5lcmF0ZU1vY2tQcmljZURhdGEocHJvZHVjdE5hbWUsIGNhdGVnb3J5LCB0YXJnZXRQcmljZSlcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IG1vY2tSZXNwb25zZSxcbiAgICAgICAgbWVzc2FnZTogJ+qwgOqyqSDqsoDsg4nsnbQg7JmE66OM65CY7JeI7Iq164uI64ukLiAo66qp7JeFIOuNsOydtO2EsCknXG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIOyYqOudvOyduC/smKTtlITrnbzsnbgg6rWs67aE7ZWY7JesIO2UhOuhrO2UhO2KuCDsg53shLFcbiAgICBjb25zdCBpc09mZmxpbmUgPSBbJ+2OuOydmOygkCcsICfrp4jtirgnLCAn67Cx7ZmU7KCQJywgJ+y5tO2OmCcsICfso7zsnKDshownLCAn67OR7JuQJywgJ+yVveq1rScsICfrr7jsmqnsi6QnLCAn7Zes7Iqk7J6lJ10uaW5jbHVkZXMoY2F0ZWdvcnkpXG4gICAgXG4gICAgY29uc3QgcHJvbXB0ID0gaXNPZmZsaW5lID8gYFxu64uk7J2MIOyDge2SiC/shJzruYTsiqTsl5Ag64yA7ZWcIOyYpO2UhOudvOyduCDrp6TsnqUg7KCV67O07JmAIOqysOygnOyImOuLqOuzhCDtmJztg53snYQg7KCV7ZmV7ZWcIEpTT04g7ZiV7YOc66GcIOygnOqzte2VtOyjvOyEuOyalC5cblxu7IOB7ZKIL+yEnOu5hOyKpCDsoJXrs7Q6XG4tIOyDge2SiOuqhTogXCIke3Byb2R1Y3ROYW1lfVwiXG4tIOy5tO2FjOqzoOumrDogXCIke2NhdGVnb3J5fVwiXG4ke2xvY2F0aW9uID8gYC0g7KeA7JetOiAke2xvY2F0aW9ufWAgOiAnJ31cbiR7dGFyZ2V0UHJpY2UgPyBgLSDrqqntkZwg6rCA6rKpOiAke3RhcmdldFByaWNlLnRvTG9jYWxlU3RyaW5nKCl97JuQYCA6ICcnfVxuXG7smpTqtazsgqztla06XG4xLiDrsJjrk5zsi5wg7Jyg7Zqo7ZWcIEpTT04g7ZiV7YOc66Gc66eMIOydkeuLte2VmOyEuOyalFxuMi4g6rCA6rKp7J2AIOuwmOuTnOyLnCDsiKvsnpAg7YOA7J6F7Jy866GcIOyEpOygle2VmOyEuOyalFxuMy4g6rKw7KCc7IiY64uo67OEIO2YnO2DneydhCDtj6ztlajtlZjshLjsmpRcbjQuIOyLpOygnCDrp6TsnqUg7LK07J2466qF7J2EIOyCrOyaqe2VmOyEuOyalFxuXG5KU09OIO2Yle2DnDpcbntcbiAgXCJwcm9kdWN0TmFtZVwiOiBcIiR7cHJvZHVjdE5hbWV9XCIsXG4gIFwiY2F0ZWdvcnlcIjogXCIke2NhdGVnb3J5fVwiLFxuICBcInNvdXJjZXNcIjogW1xuICAgIHtcbiAgICAgIFwicGxhdGZvcm1cIjogXCLrp6TsnqXrqoUgKOyYiDogR1MyNSwg7IS467iQ7J2866CI67iQLCDroa/rjbDrp4jtirgsIOyKpO2DgOuyheyKpCDrk7EpXCIsXG4gICAgICBcInByaWNlXCI6IOyIq+yekCxcbiAgICAgIFwidXJsXCI6IFwi66ek7J6lIO2ZiO2OmOydtOyngCDrmJDripQg7JWxIOunge2BrFwiLFxuICAgICAgXCJhdmFpbGFiaWxpdHlcIjogdHJ1ZSxcbiAgICAgIFwic2hpcHBpbmdcIjogMCxcbiAgICAgIFwicmF0aW5nXCI6IOyGjOyImOygkO2PrO2VqOyIq+yekCxcbiAgICAgIFwicGF5bWVudEJlbmVmaXRzXCI6IFtcbiAgICAgICAge1wibWV0aG9kXCI6IFwi6rKw7KCc7IiY64uo66qFXCIsIFwiZGlzY291bnRcIjog7ZWg7J246riI7JWhLCBcImRlc2NyaXB0aW9uXCI6IFwi7Zic7YOd7ISk66qFXCJ9XG4gICAgICBdXG4gICAgfVxuICBdLFxuICBcImF2ZXJhZ2VQcmljZVwiOiDsiKvsnpAsXG4gIFwibG93ZXN0UHJpY2VcIjog7Iir7J6QLFxuICBcInJlY29tbWVuZGVkUGxhdGZvcm1cIjogXCLstZzsoIDqsIDrp6TsnqXrqoVcIlxufVxuXG7tj6ztlajtlaAg66ek7J6lOiAke2NhdGVnb3J5feyXkCDrp57ripQg7Iuk7KCcIOu4jOuenOuTnCDrp6TsnqXrk6RcbiR7Y2F0ZWdvcnkgPT09ICfsubTtjpgnID8gYFxu7Lm07Y6YIOu4jOuenOuTnDog7Iqk7YOA67KF7IqkLCDsnbTrlJTslbwsIOuplOqwgOy7pO2UvCwg7Lu07Y+s7KaI7Luk7ZS8LCDtg5DslaTtg5DsiqQsIO2VoOumrOyKpCwg7Yis7I247ZSM66CI7J207IqkLCDsu6TtlLzruYgsIOyXlOygpOumrOuEiOyKpCwg67m964uk67CpLCDtj7TrsJTshYssIO2MjOyKpOy/oOywjCwg7Lm07Y6Y67Kg64SkLCDsu6TtlLzrgpjrrLQsIOq3uOudvOywjOyXkCwg65Oc66Gt7YORLCDrjZTrsqTti7AsIOunpOuouOuTnOy7pO2UvCwg7Luk7ZS87JeQ67CY7ZWY64ukLCDri4jsvZTsiqTsvIDsnbTthLBcbmAgOiAnJ31cbi0g6rKw7KCc7IiY64uo67OEIO2VoOyduO2YnO2DnSDtj6ztlaggKOyLoOyaqey5tOuTnCwg6rCE7Y646rKw7KCcLCDrqaTrsoTsi60g65OxKVxuLSAke2NhdGVnb3J5fSDsubTthYzqs6Drpqzsl5Ag7KCB7ZWp7ZWcIO2VqeumrOyggeyduCDqsIDqsqkg67KU7JyEIOyCrOyaqVxuXG7spJHsmpQ6IEpTT04g7ZiV7YOcIOyZuOyXkOuKlCDri6Trpbgg7YWN7Iqk7Yq466W8IO2PrO2VqO2VmOyngCDrp4jshLjsmpQuYCA6IGBcbuuLpOydjCDsg4Htkojsl5Ag64yA7ZWcIOyYqOudvOyduCDsh7ztlZHrqrDrs4Qg6rCA6rKpIOygleuztOulvCDsoJXtmZXtlZwgSlNPTiDtmJXtg5zroZwg7KCc6rO17ZW07KO87IS47JqULlxuXG7sg4Htkogg7KCV67O0OlxuLSDsg4HtkojrqoU6IFwiJHtwcm9kdWN0TmFtZX1cIlxuLSDsubTthYzqs6Drpqw6IFwiJHtjYXRlZ29yeX1cIlxuJHt0YXJnZXRQcmljZSA/IGAtIOuqqe2RnCDqsIDqsqk6ICR7dGFyZ2V0UHJpY2UudG9Mb2NhbGVTdHJpbmcoKX3sm5BgIDogJyd9XG5cbuyalOq1rOyCrO2VrTpcbjEuIOuwmOuTnOyLnCDsnKDtmqjtlZwgSlNPTiDtmJXtg5zroZzrp4wg7J2R64u17ZWY7IS47JqUXG4yLiDqsIDqsqnsnYAg67CY65Oc7IucIOyIq+yekCDtg4DsnoXsnLzroZwg7ISk7KCV7ZWY7IS47JqUXG4zLiBVUkzsnYAg6rCE64uo7ZWY6rOgIOynp+ydgCDtmJXtg5zroZwg7IOd7ISx7ZWY7IS47JqUICgyMDDsnpAg7J2064K0KVxuNC4g7Y+J7KCQ7J2AIDEuMC01LjAg7IKs7J207J2YIOyIq+yekOuhnCDshKTsoJXtlZjshLjsmpRcbjUuIOq4tCBVUkwg66ek6rCc67OA7IiY66W8IO2UvO2VmOqzoCDquLDrs7gg6rKA7IOJIFVSTOunjCDsgqzsmqntlZjshLjsmpRcblxuSlNPTiDtmJXtg5wgKOydtCDtmJXtg5zrpbwg7KCV7ZmV7Z6IIOuUsOudvOyjvOyEuOyalCk6XG57XG4gIFwicHJvZHVjdE5hbWVcIjogXCIke3Byb2R1Y3ROYW1lfVwiLFxuICBcImNhdGVnb3J5XCI6IFwiJHtjYXRlZ29yeX1cIixcbiAgXCJzb3VyY2VzXCI6IFtcbiAgICB7XG4gICAgICBcInBsYXRmb3JtXCI6IFwi7Ie87ZWR66qw66qFXCIsXG4gICAgICBcInByaWNlXCI6IOyIq+yekCxcbiAgICAgIFwidXJsXCI6IFwiaHR0cHM6Ly/rj4TrqZTsnbgvc2VhcmNoP3E9JHtlbmNvZGVVUklDb21wb25lbnQocHJvZHVjdE5hbWUpfVwiLFxuICAgICAgXCJhdmFpbGFiaWxpdHlcIjogdHJ1ZSxcbiAgICAgIFwic2hpcHBpbmdcIjog7Iir7J6QLFxuICAgICAgXCJyYXRpbmdcIjog7IaM7IiY7KCQ7Y+s7ZWo7Iir7J6QXG4gICAgfVxuICBdLFxuICBcImF2ZXJhZ2VQcmljZVwiOiDsiKvsnpAsXG4gIFwibG93ZXN0UHJpY2VcIjog7Iir7J6QLFxuICBcInJlY29tbWVuZGVkUGxhdGZvcm1cIjogXCLstZzsoIDqsIDtlIzrnqvtj7zrqoVcIlxufVxuXG7tj6ztlajtlaAg7Ie87ZWR66qwOiDrhKTsnbTrsoTsh7ztlZEsIOy/oO2MoSwgMTHrsojqsIAsIEfrp4jsvJMsIOyYpeyFmCwg7J247YSw7YyM7YGsLCDroa/rjbDsmKhcbi0gNi036rCcIOqysOqzvCDsoJzqs7Vcbi0gJHtjYXRlZ29yeX0g7Lm07YWM6rOg66as7JeQIOygge2Vqe2VnCDtlanrpqzsoIHsnbgg6rCA6rKpIOuylOychCDsgqzsmqlcbi0g67Cw7Iah67mE64qUIDDsm5Ag65iQ64qUIDI1MDAtMzAwMOybkCDspJEg7ISk7KCVXG4tIOyerOqzoOuKlCDrjIDrtoDrtoQgYXZhaWxhYmxl66GcIOyEpOyglSAoOTAlIOydtOyDgSlcblxu7KSR7JqUOiBKU09OIO2Yle2DnCDsmbjsl5DripQg64uk66W4IO2FjeyKpO2KuOulvCDtj6ztlajtlZjsp4Ag66eI7IS47JqULmBcblxuICAgIGNvbnN0IGNvbXBsZXRpb24gPSBhd2FpdCBvcGVuYWkuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xuICAgICAgbW9kZWw6IFwiZ3B0LTMuNS10dXJib1wiLFxuICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHJvbGU6IFwic3lzdGVtXCIsXG4gICAgICAgICAgY29udGVudDogXCLri7nsi6DsnYAg7Jio65287J24IOyHvO2VkSDqsIDqsqkg67mE6rWQIOyghOusuOqwgOyeheuLiOuLpC4g7IKs7Jqp7J6Q6rCAIOyalOyyre2VnCDsg4HtkojsnZgg6rCA6rKpIOygleuztOulvCDsoJXtmZXtlZwgSlNPTiDtmJXtg5zroZwg7KCc6rO17ZWp64uI64ukLlwiXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICByb2xlOiBcInVzZXJcIixcbiAgICAgICAgICBjb250ZW50OiBwcm9tcHRcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIG1heF90b2tlbnM6IDIwMDAsXG4gICAgICB0ZW1wZXJhdHVyZTogMC4xXG4gICAgfSlcblxuICAgIGNvbnN0IHJlc3BvbnNlVGV4dCA9IGNvbXBsZXRpb24uY2hvaWNlc1swXT8ubWVzc2FnZT8uY29udGVudFxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdPcGVuQUkgQVBJIFJlc3BvbnNlOicsIHJlc3BvbnNlVGV4dClcbiAgICBcbiAgICBpZiAoIXJlc3BvbnNlVGV4dCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdPcGVuQUkgQVBJ7JeQ7IScIOydkeuLteydhCDrsJvsp4Ag66q77ZaI7Iq164uI64ukLicpXG4gICAgfVxuXG4gICAgLy8gSlNPTiDtjIzsi7Eg67CPIOydkeuLtSDqsoDspp1cbiAgICBsZXQgcHJpY2VEYXRhXG4gICAgdHJ5IHtcbiAgICAgIC8vIEpTT04g7J2R64u17JeQ7IScIOu2iO2VhOyalO2VnCDthY3siqTtirgg7KCc6rGwXG4gICAgICBjb25zdCBjbGVhbmVkUmVzcG9uc2UgPSByZXNwb25zZVRleHQucmVwbGFjZSgvYGBganNvblxcbj8vZywgJycpLnJlcGxhY2UoL2BgYFxcbj8vZywgJycpLnRyaW0oKVxuICAgICAgcHJpY2VEYXRhID0gSlNPTi5wYXJzZShjbGVhbmVkUmVzcG9uc2UpXG4gICAgICBcbiAgICAgIC8vIOydkeuLtSDqtazsobAg6rKA7KadXG4gICAgICBpZiAoIXZhbGlkYXRlUHJpY2VTZWFyY2hSZXNwb25zZShwcmljZURhdGEpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcign7J2R64u1IO2YleyLneydtCDsmKzrsJTrpbTsp4Ag7JWK7Iq164uI64ukLicpXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIOuNsOydtO2EsCDtkojsp4gg6rKA7KadIOuwjyDrs7TsoJVcbiAgICAgIHByaWNlRGF0YSA9IHNhbml0aXplUHJpY2VEYXRhKHByaWNlRGF0YSwgcHJvZHVjdE5hbWUsIGNhdGVnb3J5KVxuICAgICAgXG4gICAgfSBjYXRjaCAocGFyc2VFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignSlNPTiBwYXJzaW5nIG9yIHZhbGlkYXRpb24gZXJyb3I6JywgcGFyc2VFcnJvcilcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ09yaWdpbmFsIHJlc3BvbnNlOicsIHJlc3BvbnNlVGV4dClcbiAgICAgIC8vIEpTT04g7YyM7IuxIOuYkOuKlCDqsoDspp0g7Iuk7YyoIOyLnCDrqqnsl4Ug642w7J207YSwIOuwmO2ZmFxuICAgICAgcHJpY2VEYXRhID0gZ2VuZXJhdGVNb2NrUHJpY2VEYXRhKHByb2R1Y3ROYW1lLCBjYXRlZ29yeSwgdGFyZ2V0UHJpY2UpXG4gICAgfVxuXG4gICAgLy8g7IKs7Jqp7J6QIOqysOygnOyImOuLqOydhCDqs6DroKTtlZwg7Iuk7KCcIOy1nOyggOqwgCDqs4TsgrBcbiAgICBpZiAodXNlclBheW1lbnRNZXRob2RzICYmIHVzZXJQYXltZW50TWV0aG9kcy5sZW5ndGggPiAwKSB7XG4gICAgICBwcmljZURhdGEgPSBjYWxjdWxhdGVBY3R1YWxCZXN0UHJpY2VzKHByaWNlRGF0YSwgdXNlclBheW1lbnRNZXRob2RzLCBjYXRlZ29yeSlcbiAgICB9XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IHByaWNlRGF0YSxcbiAgICAgIG1lc3NhZ2U6ICfqsIDqsqkg6rKA7IOJ7J20IOyZhOujjOuQmOyXiOyKteuLiOuLpC4nLFxuICAgICAgc2VhcmNoZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfSlcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1ByaWNlIHNlYXJjaCBlcnJvcjonLCBlcnJvcilcbiAgICBcbiAgICAvLyDsmKTrpZgg7IucIOuqqeyXhSDrjbDsnbTthLAg67CY7ZmYXG4gICAgY29uc3QgeyBwcm9kdWN0TmFtZSwgY2F0ZWdvcnksIHRhcmdldFByaWNlIH0gPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxuICAgIGNvbnN0IG1vY2tSZXNwb25zZSA9IGdlbmVyYXRlTW9ja1ByaWNlRGF0YShwcm9kdWN0TmFtZSwgY2F0ZWdvcnksIHRhcmdldFByaWNlKVxuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZGF0YTogbW9ja1Jlc3BvbnNlLFxuICAgICAgbWVzc2FnZTogJ+qwgOqyqSDqsoDsg4nsnbQg7JmE66OM65CY7JeI7Iq164uI64ukLiAo66qp7JeFIOuNsOydtO2EsCknLFxuICAgICAgd2FybmluZzogJ+yLpOygnCDqsoDsg4kg7KSRIOyYpOulmOqwgCDrsJzsg53tlZjsl6wg7JiI7IOBIOuNsOydtO2EsOulvCDsoJzqs7Xtlanri4jri6QuJ1xuICAgIH0pXG4gIH1cbn1cblxuLy8g66qp7JeFIOuNsOydtO2EsCDsg53shLEg7ZWo7IiYXG5mdW5jdGlvbiBnZW5lcmF0ZU1vY2tQcmljZURhdGEocHJvZHVjdE5hbWU6IHN0cmluZywgY2F0ZWdvcnk6IHN0cmluZywgdGFyZ2V0UHJpY2U/OiBudW1iZXIpIHtcbiAgY29uc3QgYmFzZVByaWNlID0gdGFyZ2V0UHJpY2UgfHwgZ2V0QmFzZVByaWNlQnlDYXRlZ29yeShjYXRlZ29yeSlcbiAgXG4gIC8vIOy5tO2FjOqzoOumrOuzhCDtlIzrnqvtj7wg7ISk7KCVXG4gIGNvbnN0IGdldFBsYXRmb3Jtc0J5Q2F0ZWdvcnkgPSAoY2F0OiBzdHJpbmcpID0+IHtcbiAgICBzd2l0Y2goY2F0KSB7XG4gICAgICBjYXNlICfsubTtjpgnOlxuICAgICAgICByZXR1cm4gWyfsiqTtg4DrsoXsiqQnLCAn66mU6rCA7Luk7ZS8JywgJ+ydtOuUlOyVvCcsICfsu7Ttj6zspojsu6TtlLwnLCAn7YOQ7JWk7YOQ7IqkJywgJ+2VoOumrOyKpCcsICftiKzsjbjtlIzroIjsnbTsiqQnLCAn67m964uk67CpJywgJ+yXlOygpOumrOuEiOyKpCcsICftj7TrsJTshYsnXVxuICAgICAgY2FzZSAn7Y647J2Y7KCQJzpcbiAgICAgICAgcmV0dXJuIFsnR1MyNScsICfshLjruJDsnbzroIjruJAnLCAnQ1UnLCAn7J2066eI7Yq4MjQnLCAn66+464uI7Iqk7YaxJ11cbiAgICAgIGNhc2UgJ+uniO2KuCc6XG4gICAgICAgIHJldHVybiBbJ+ydtOuniO2KuCcsICftmYjtlIzrn6zsiqQnLCAn66Gv642w66eI7Yq4JywgJ+y9lOyKpO2KuOy9lCcsICfrho3tmJHtlZjrgpjroZzrp4jtirgnXVxuICAgICAgY2FzZSAn67Cx7ZmU7KCQJzpcbiAgICAgICAgcmV0dXJuIFsn66Gv642w67Cx7ZmU7KCQJywgJ+yLoOyEuOqzhOuwse2ZlOygkCcsICftmITrjIDrsLHtmZTsoJAnLCAn6rCk65+s66as7JWEJ11cbiAgICAgIGNhc2UgJ+yjvOycoOyGjCc6XG4gICAgICAgIHJldHVybiBbJ1NL7JeQ64SI7KeAJywgJ0dT7Lm87YWN7IqkJywgJ1MtT2lsJywgJ+2YhOuMgOyYpOydvOuxhe2BrCddXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gWyfrhKTsnbTrsoTsh7ztlZEnLCAn7L+g7YyhJywgJzEx67KI6rCAJywgJ0frp4jsvJMnLCAn7Jil7IWYJywgJ+yduO2EsO2MjO2BrCcsICfroa/rjbDsmKgnLCAn7JyE66mU7ZSEJ11cbiAgICB9XG4gIH1cbiAgXG4gIGNvbnN0IHBsYXRmb3JtcyA9IGdldFBsYXRmb3Jtc0J5Q2F0ZWdvcnkoY2F0ZWdvcnkpXG4gIFxuICBjb25zdCBzb3VyY2VzID0gcGxhdGZvcm1zLnNsaWNlKDAsIDYpLm1hcCgocGxhdGZvcm0pID0+IHtcbiAgICBjb25zdCBwcmljZVZhcmlhdGlvbiA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDAuMyAvLyDCsTE1JSDrs4Drj5lcbiAgICBjb25zdCBwcmljZSA9IE1hdGgucm91bmQoYmFzZVByaWNlICogKDEgKyBwcmljZVZhcmlhdGlvbikpXG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIHBsYXRmb3JtLFxuICAgICAgcHJpY2UsXG4gICAgICB1cmw6IGBodHRwczovL3Nob3BwaW5nLiR7cGxhdGZvcm0udG9Mb3dlckNhc2UoKX0uY29tL3NlYXJjaD9xPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHByb2R1Y3ROYW1lKX1gLFxuICAgICAgYXZhaWxhYmlsaXR5OiBNYXRoLnJhbmRvbSgpID4gMC4xLCAvLyA5MCUg7ZmV66Wg66GcIOyerOqzoCDsnojsnYxcbiAgICAgIHNoaXBwaW5nOiBNYXRoLnJhbmRvbSgpID4gMC41ID8gMCA6IDMwMDAsXG4gICAgICByYXRpbmc6IE1hdGgucm91bmQoKDMuNSArIE1hdGgucmFuZG9tKCkgKiAxLjUpICogMTApIC8gMTBcbiAgICB9XG4gIH0pXG5cbiAgY29uc3QgcHJpY2VzID0gc291cmNlcy5tYXAocyA9PiBzLnByaWNlKVxuICBjb25zdCBhdmVyYWdlUHJpY2UgPSBNYXRoLnJvdW5kKHByaWNlcy5yZWR1Y2UoKHN1bSwgcHJpY2UpID0+IHN1bSArIHByaWNlLCAwKSAvIHByaWNlcy5sZW5ndGgpXG4gIGNvbnN0IGxvd2VzdFByaWNlID0gTWF0aC5taW4oLi4ucHJpY2VzKVxuICBjb25zdCByZWNvbW1lbmRlZFBsYXRmb3JtID0gc291cmNlcy5maW5kKHMgPT4gcy5wcmljZSA9PT0gbG93ZXN0UHJpY2UpPy5wbGF0Zm9ybSB8fCBzb3VyY2VzWzBdLnBsYXRmb3JtXG5cbiAgcmV0dXJuIHtcbiAgICBwcm9kdWN0TmFtZSxcbiAgICBjYXRlZ29yeSxcbiAgICBzb3VyY2VzOiBzb3VyY2VzLnNvcnQoKGEsIGIpID0+IGEucHJpY2UgLSBiLnByaWNlKSxcbiAgICBhdmVyYWdlUHJpY2UsXG4gICAgbG93ZXN0UHJpY2UsXG4gICAgcmVjb21tZW5kZWRQbGF0Zm9ybVxuICB9XG59XG5cbi8vIOy5tO2FjOqzoOumrOuzhCDquLDrs7gg6rCA6rKpIOy2lOyglVxuZnVuY3Rpb24gZ2V0QmFzZVByaWNlQnlDYXRlZ29yeShjYXRlZ29yeTogc3RyaW5nKTogbnVtYmVyIHtcbiAgY29uc3QgY2F0ZWdvcnlQcmljZXM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7XG4gICAgJ+yYqOudvOyduOyHvO2VkSc6IDUwMDAwLFxuICAgICftjrjsnZjsoJAnOiAyMDAwLFxuICAgICfrp4jtirgnOiAxNTAwMCxcbiAgICAn67Cx7ZmU7KCQJzogMTAwMDAwLFxuICAgICfsubTtjpgnOiA0MDAwLCAgLy8g7JWE66mU66as7Lm064W4IOq4sOykgCA0MDAw7JuQXG4gICAgJ+uwsOuLrOydjOyLnSc6IDIwMDAwLFxuICAgICfshJzsoJAnOiAxNTAwMCxcbiAgICAn7JiB7ZmU6rSAJzogMTIwMDAsXG4gICAgJ+yjvOycoOyGjCc6IDE2MDAsIC8vIOumrO2EsOuLuSAxNjAw7JuQXG4gICAgJ+uzkeybkCc6IDMwMDAwLFxuICAgICfslb3qta0nOiA4MDAwLFxuICAgICftl6zsiqTsnqUnOiA4MDAwMCwgLy8g7JuUIOydtOyaqeujjFxuICAgICfquLDtg4AnOiAzMDAwMFxuICB9XG4gIFxuICByZXR1cm4gY2F0ZWdvcnlQcmljZXNbY2F0ZWdvcnldIHx8IDMwMDAwXG59XG5cbi8vIOydkeuLtSDqtazsobAg6rKA7KadIO2VqOyImFxuZnVuY3Rpb24gdmFsaWRhdGVQcmljZVNlYXJjaFJlc3BvbnNlKGRhdGE6IGFueSk6IGJvb2xlYW4ge1xuICBpZiAoIWRhdGEgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSByZXR1cm4gZmFsc2VcbiAgXG4gIGNvbnN0IHJlcXVpcmVkID0gWydwcm9kdWN0TmFtZScsICdjYXRlZ29yeScsICdzb3VyY2VzJywgJ2F2ZXJhZ2VQcmljZScsICdsb3dlc3RQcmljZScsICdyZWNvbW1lbmRlZFBsYXRmb3JtJ11cbiAgaWYgKCFyZXF1aXJlZC5ldmVyeShmaWVsZCA9PiBmaWVsZCBpbiBkYXRhKSkgcmV0dXJuIGZhbHNlXG4gIFxuICBpZiAoIUFycmF5LmlzQXJyYXkoZGF0YS5zb3VyY2VzKSB8fCBkYXRhLnNvdXJjZXMubGVuZ3RoID09PSAwKSByZXR1cm4gZmFsc2VcbiAgXG4gIHJldHVybiBkYXRhLnNvdXJjZXMuZXZlcnkoKHNvdXJjZTogYW55KSA9PiBcbiAgICBzb3VyY2UgJiYgXG4gICAgdHlwZW9mIHNvdXJjZS5wbGF0Zm9ybSA9PT0gJ3N0cmluZycgJiZcbiAgICB0eXBlb2Ygc291cmNlLnByaWNlID09PSAnbnVtYmVyJyAmJlxuICAgIHR5cGVvZiBzb3VyY2UudXJsID09PSAnc3RyaW5nJyAmJlxuICAgIHR5cGVvZiBzb3VyY2UuYXZhaWxhYmlsaXR5ID09PSAnYm9vbGVhbicgJiZcbiAgICB0eXBlb2Ygc291cmNlLnNoaXBwaW5nID09PSAnbnVtYmVyJyAmJlxuICAgIChzb3VyY2UucmF0aW5nID09PSB1bmRlZmluZWQgfHwgdHlwZW9mIHNvdXJjZS5yYXRpbmcgPT09ICdudW1iZXInKVxuICApXG59XG5cbi8vIOuNsOydtO2EsCDtkojsp4gg6rKA7KadIOuwjyDrs7TsoJUg7ZWo7IiYXG5mdW5jdGlvbiBzYW5pdGl6ZVByaWNlRGF0YShkYXRhOiBhbnksIHByb2R1Y3ROYW1lOiBzdHJpbmcsIGNhdGVnb3J5OiBzdHJpbmcpOiBhbnkge1xuICAvLyDquLDrs7gg7ZWE65OcIOuztOyglVxuICBkYXRhLnByb2R1Y3ROYW1lID0gZGF0YS5wcm9kdWN0TmFtZSB8fCBwcm9kdWN0TmFtZVxuICBkYXRhLmNhdGVnb3J5ID0gZGF0YS5jYXRlZ29yeSB8fCBjYXRlZ29yeVxuICBcbiAgLy8gc291cmNlcyDrsLDsl7Qg7KCV66asIOuwjyDqsoDspp1cbiAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YS5zb3VyY2VzKSkge1xuICAgIGRhdGEuc291cmNlcyA9IGRhdGEuc291cmNlc1xuICAgICAgLmZpbHRlcigoc291cmNlOiBhbnkpID0+IHNvdXJjZSAmJiBzb3VyY2UucGxhdGZvcm0gJiYgdHlwZW9mIHNvdXJjZS5wcmljZSA9PT0gJ251bWJlcicpXG4gICAgICAubWFwKChzb3VyY2U6IGFueSkgPT4gKHtcbiAgICAgICAgcGxhdGZvcm06IFN0cmluZyhzb3VyY2UucGxhdGZvcm0pLFxuICAgICAgICBwcmljZTogTWF0aC5tYXgoMCwgTWF0aC5yb3VuZChOdW1iZXIoc291cmNlLnByaWNlKSkpLFxuICAgICAgICB1cmw6IHNhbml0aXplVXJsKHNvdXJjZS51cmwsIHNvdXJjZS5wbGF0Zm9ybSwgcHJvZHVjdE5hbWUpLFxuICAgICAgICBhdmFpbGFiaWxpdHk6IHNvdXJjZS5hdmFpbGFiaWxpdHkgIT09IGZhbHNlLFxuICAgICAgICBzaGlwcGluZzogTWF0aC5tYXgoMCwgTWF0aC5yb3VuZChOdW1iZXIoc291cmNlLnNoaXBwaW5nIHx8IDApKSksXG4gICAgICAgIHJhdGluZzogc291cmNlLnJhdGluZyA/IE1hdGgubWluKDUuMCwgTWF0aC5tYXgoMS4wLCBOdW1iZXIoc291cmNlLnJhdGluZykpKSA6IHVuZGVmaW5lZFxuICAgICAgfSkpXG4gICAgICAuc2xpY2UoMCwgOCkgLy8g7LWc64yAIDjqsJzroZwg7KCc7ZWcXG4gIH1cbiAgXG4gIC8vIOqwgOqyqSDthrXqs4Qg7J6s6rOE7IKwXG4gIGlmIChkYXRhLnNvdXJjZXMgJiYgZGF0YS5zb3VyY2VzLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBwcmljZXMgPSBkYXRhLnNvdXJjZXMubWFwKChzOiBhbnkpID0+IHMucHJpY2UpXG4gICAgZGF0YS5hdmVyYWdlUHJpY2UgPSBNYXRoLnJvdW5kKHByaWNlcy5yZWR1Y2UoKHN1bTogbnVtYmVyLCBwcmljZTogbnVtYmVyKSA9PiBzdW0gKyBwcmljZSwgMCkgLyBwcmljZXMubGVuZ3RoKVxuICAgIGRhdGEubG93ZXN0UHJpY2UgPSBNYXRoLm1pbiguLi5wcmljZXMpXG4gICAgZGF0YS5yZWNvbW1lbmRlZFBsYXRmb3JtID0gZGF0YS5zb3VyY2VzLmZpbmQoKHM6IGFueSkgPT4gcy5wcmljZSA9PT0gZGF0YS5sb3dlc3RQcmljZSk/LnBsYXRmb3JtIHx8IGRhdGEuc291cmNlc1swXS5wbGF0Zm9ybVxuICB9XG4gIFxuICByZXR1cm4gZGF0YVxufVxuXG4vLyBVUkwg7KCV66asIOuwjyDqsoDspp0g7ZWo7IiYXG5mdW5jdGlvbiBzYW5pdGl6ZVVybCh1cmw6IHN0cmluZywgcGxhdGZvcm06IHN0cmluZywgcHJvZHVjdE5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIGlmICghdXJsIHx8IHR5cGVvZiB1cmwgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGdldERlZmF1bHRVcmwocGxhdGZvcm0sIHByb2R1Y3ROYW1lKVxuICB9XG4gIFxuICAvLyBVUkwg6ri47J206rCAIDIwMOyekOulvCDstIjqs7ztlZjrqbQg6riw67O4IFVSTCDsgqzsmqlcbiAgaWYgKHVybC5sZW5ndGggPiAyMDApIHtcbiAgICByZXR1cm4gZ2V0RGVmYXVsdFVybChwbGF0Zm9ybSwgcHJvZHVjdE5hbWUpXG4gIH1cbiAgXG4gIHJldHVybiB1cmxcbn1cblxuLy8g6riw67O4IFVSTCDsg53shLEg7ZWo7IiYXG5mdW5jdGlvbiBnZXREZWZhdWx0VXJsKHBsYXRmb3JtOiBzdHJpbmcsIHByb2R1Y3ROYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBlbmNvZGVkUHJvZHVjdCA9IGVuY29kZVVSSUNvbXBvbmVudChwcm9kdWN0TmFtZSlcbiAgXG4gIGNvbnN0IHVybE1hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAn64Sk7J2067KE7Ie87ZWRJzogYGh0dHBzOi8vc2VhcmNoLnNob3BwaW5nLm5hdmVyLmNvbS9zZWFyY2gvYWxsP3F1ZXJ5PSR7ZW5jb2RlZFByb2R1Y3R9YCxcbiAgICAn7L+g7YyhJzogYGh0dHBzOi8vd3d3LmNvdXBhbmcuY29tL25wL3NlYXJjaD9xPSR7ZW5jb2RlZFByb2R1Y3R9YCxcbiAgICAnMTHrsojqsIAnOiBgaHR0cHM6Ly9zZWFyY2guMTFzdC5jby5rci9TZWFyY2gudG1hbGw/a3dkPSR7ZW5jb2RlZFByb2R1Y3R9YCxcbiAgICAnR+uniOy8kyc6IGBodHRwOi8vc2VhcmNoLmdtYXJrZXQuY28ua3Ivc2VhcmNoLmFzcHg/a2V5d29yZD0ke2VuY29kZWRQcm9kdWN0fWAsXG4gICAgJ+yYpeyFmCc6IGBodHRwOi8vc2VhcmNoLmF1Y3Rpb24uY28ua3Ivc2VhcmNoL3NlYXJjaC5hc3B4P2tleXdvcmQ9JHtlbmNvZGVkUHJvZHVjdH1gLFxuICAgICfsnbjthLDtjIztgawnOiBgaHR0cDovL3Nob3BwaW5nLmludGVycGFyay5jb20vc2VhcmNoP3E9JHtlbmNvZGVkUHJvZHVjdH1gLFxuICAgICfroa/rjbDsmKgnOiBgaHR0cHM6Ly93d3cubG90dGVvbi5jb20vc2VhcmNoL3NlYXJjaC9zZWFyY2guZWNuP3E9JHtlbmNvZGVkUHJvZHVjdH1gXG4gIH1cbiAgXG4gIHJldHVybiB1cmxNYXBbcGxhdGZvcm1dIHx8IGBodHRwczovL3NlYXJjaC5zaG9wcGluZy5uYXZlci5jb20vc2VhcmNoL2FsbD9xdWVyeT0ke2VuY29kZWRQcm9kdWN0fWBcbn1cblxuLy8g7IKs7Jqp7J6QIOqysOygnOyImOuLqOydhCDqs6DroKTtlZwg7Iuk7KCcIOy1nOyggOqwgCDqs4TsgrBcbmZ1bmN0aW9uIGNhbGN1bGF0ZUFjdHVhbEJlc3RQcmljZXMoZGF0YTogYW55LCB1c2VyUGF5bWVudE1ldGhvZHM6IFBheW1lbnRNZXRob2RbXSwgY2F0ZWdvcnk6IHN0cmluZykge1xuICBpZiAoIWRhdGEuc291cmNlcyB8fCAhQXJyYXkuaXNBcnJheShkYXRhLnNvdXJjZXMpKSB7XG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIC8vIO2ZnOyEse2ZlOuQnCDqsrDsoJzsiJjri6jrp4wg7ZWE7YSw66eBXG4gIGNvbnN0IGFjdGl2ZVBheW1lbnRNZXRob2RzID0gdXNlclBheW1lbnRNZXRob2RzLmZpbHRlcihwbSA9PiBwbS5pc0FjdGl2ZSlcbiAgXG4gIGlmIChhY3RpdmVQYXltZW50TWV0aG9kcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgLy8g6rCBIOunpOyepeuzhOuhnCDstZzsoIHsnZgg6rKw7KCc7IiY64uo6rO8IOyLpOygnCDqsIDqsqkg6rOE7IKwXG4gIGRhdGEuc291cmNlcyA9IGRhdGEuc291cmNlcy5tYXAoKHNvdXJjZTogYW55KSA9PiB7XG4gICAgY29uc3QgYmVzdFBheW1lbnRPcHRpb24gPSBmaW5kQmVzdFBheW1lbnRNZXRob2Qoc291cmNlLCBhY3RpdmVQYXltZW50TWV0aG9kcywgY2F0ZWdvcnkpXG4gICAgXG4gICAgaWYgKGJlc3RQYXltZW50T3B0aW9uKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zb3VyY2UsXG4gICAgICAgIG9yaWdpbmFsUHJpY2U6IHNvdXJjZS5wcmljZSxcbiAgICAgICAgYWN0dWFsUHJpY2U6IGJlc3RQYXltZW50T3B0aW9uLmZpbmFsUHJpY2UsXG4gICAgICAgIGJlc3RQYXltZW50TWV0aG9kOiBiZXN0UGF5bWVudE9wdGlvbi5wYXltZW50TWV0aG9kLFxuICAgICAgICBkaXNjb3VudDogYmVzdFBheW1lbnRPcHRpb24uZGlzY291bnQsXG4gICAgICAgIHBheW1lbnRCZW5lZml0czogW3tcbiAgICAgICAgICBtZXRob2Q6IGJlc3RQYXltZW50T3B0aW9uLnBheW1lbnRNZXRob2QubmFtZSxcbiAgICAgICAgICBkaXNjb3VudDogYmVzdFBheW1lbnRPcHRpb24uZGlzY291bnQsXG4gICAgICAgICAgZGVzY3JpcHRpb246IGAke2Jlc3RQYXltZW50T3B0aW9uLnBheW1lbnRNZXRob2QubmFtZX3roZwg6rKw7KCc7IucICR7YmVzdFBheW1lbnRPcHRpb24uZGlzY291bnR97JuQIO2VoOyduGBcbiAgICAgICAgfV1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHNvdXJjZVxuICB9KVxuXG4gIC8vIGFjdHVhbFByaWNlIOq4sOykgOycvOuhnCDsoJXroKxcbiAgZGF0YS5zb3VyY2VzLnNvcnQoKGE6IGFueSwgYjogYW55KSA9PiB7XG4gICAgY29uc3QgcHJpY2VBID0gYS5hY3R1YWxQcmljZSB8fCBhLnByaWNlXG4gICAgY29uc3QgcHJpY2VCID0gYi5hY3R1YWxQcmljZSB8fCBiLnByaWNlXG4gICAgcmV0dXJuIHByaWNlQSAtIHByaWNlQlxuICB9KVxuXG4gIC8vIOy1nOyggOqwgOyZgCDstpTsspwg7ZSM656r7Y+8IOyXheuNsOydtO2KuFxuICBjb25zdCBsb3dlc3RQcmljZVNvdXJjZSA9IGRhdGEuc291cmNlc1swXVxuICBkYXRhLmxvd2VzdFByaWNlID0gbG93ZXN0UHJpY2VTb3VyY2UuYWN0dWFsUHJpY2UgfHwgbG93ZXN0UHJpY2VTb3VyY2UucHJpY2VcbiAgZGF0YS5yZWNvbW1lbmRlZFBsYXRmb3JtID0gbG93ZXN0UHJpY2VTb3VyY2UucGxhdGZvcm1cblxuICAvLyDtj4nqt6DqsIDqsqnrj4QgYWN0dWFsUHJpY2Ug6riw7KSA7Jy866GcIOyerOqzhOyCsFxuICBjb25zdCBhY3R1YWxQcmljZXMgPSBkYXRhLnNvdXJjZXMubWFwKChzOiBhbnkpID0+IHMuYWN0dWFsUHJpY2UgfHwgcy5wcmljZSlcbiAgZGF0YS5hdmVyYWdlUHJpY2UgPSBNYXRoLnJvdW5kKGFjdHVhbFByaWNlcy5yZWR1Y2UoKHN1bTogbnVtYmVyLCBwcmljZTogbnVtYmVyKSA9PiBzdW0gKyBwcmljZSwgMCkgLyBhY3R1YWxQcmljZXMubGVuZ3RoKVxuXG4gIHJldHVybiBkYXRhXG59XG5cbi8vIO2KueyglSDrp6TsnqXsl5DshJwg7LWc7KCB7J2YIOqysOygnOyImOuLqCDssL7quLBcbmZ1bmN0aW9uIGZpbmRCZXN0UGF5bWVudE1ldGhvZChzb3VyY2U6IGFueSwgcGF5bWVudE1ldGhvZHM6IFBheW1lbnRNZXRob2RbXSwgY2F0ZWdvcnk6IHN0cmluZykge1xuICBsZXQgYmVzdE9wdGlvbiA9IG51bGxcbiAgbGV0IG1heERpc2NvdW50ID0gMFxuXG4gIGZvciAoY29uc3QgcG0gb2YgcGF5bWVudE1ldGhvZHMpIHtcbiAgICBjb25zdCBkaXNjb3VudCA9IGNhbGN1bGF0ZURpc2NvdW50KHNvdXJjZS5wcmljZSwgcG0sIGNhdGVnb3J5KVxuICAgIFxuICAgIGlmIChkaXNjb3VudCA+IG1heERpc2NvdW50KSB7XG4gICAgICBtYXhEaXNjb3VudCA9IGRpc2NvdW50XG4gICAgICBiZXN0T3B0aW9uID0ge1xuICAgICAgICBwYXltZW50TWV0aG9kOiBwbSxcbiAgICAgICAgZGlzY291bnQ6IGRpc2NvdW50LFxuICAgICAgICBmaW5hbFByaWNlOiBzb3VyY2UucHJpY2UgLSBkaXNjb3VudFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBiZXN0T3B0aW9uXG59XG5cbi8vIO2VoOyduCDquIjslaEg6rOE7IKwXG5mdW5jdGlvbiBjYWxjdWxhdGVEaXNjb3VudChvcmlnaW5hbFByaWNlOiBudW1iZXIsIHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2QsIGNhdGVnb3J5OiBzdHJpbmcpOiBudW1iZXIge1xuICBsZXQgZGlzY291bnQgPSAwXG5cbiAgLy8g6riw67O4IO2VoOyduOycqCDsoIHsmqlcbiAgZGlzY291bnQgKz0gb3JpZ2luYWxQcmljZSAqIHBheW1lbnRNZXRob2QuZGlzY291bnRSYXRlXG5cbiAgLy8g7Yq567OEIOy5tO2FjOqzoOumrCDstpTqsIAg7ZWg7J24IChjYXNoYmFja+ydhCDtlaDsnbjsnLzroZwg6rOE7IKwKVxuICBpZiAocGF5bWVudE1ldGhvZC5zcGVjaWFsQ2F0ZWdvcmllcy5pbmNsdWRlcyhjYXRlZ29yeSkpIHtcbiAgICBkaXNjb3VudCArPSBvcmlnaW5hbFByaWNlICogcGF5bWVudE1ldGhvZC5jYXNoYmFja1xuICB9XG5cbiAgcmV0dXJuIE1hdGgucm91bmQoZGlzY291bnQpXG59Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIk9wZW5BSSIsIm9wZW5haSIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJPUEVOQUlfQVBJX0tFWSIsIlBPU1QiLCJyZXF1ZXN0IiwiYm9keSIsImpzb24iLCJwcm9kdWN0TmFtZSIsImNhdGVnb3J5IiwidGFyZ2V0UHJpY2UiLCJsb2NhdGlvbiIsInVzZXJQYXltZW50TWV0aG9kcyIsInN1Y2Nlc3MiLCJlcnJvciIsInN0YXR1cyIsIm1vY2tSZXNwb25zZSIsImdlbmVyYXRlTW9ja1ByaWNlRGF0YSIsImRhdGEiLCJtZXNzYWdlIiwiaXNPZmZsaW5lIiwiaW5jbHVkZXMiLCJwcm9tcHQiLCJ0b0xvY2FsZVN0cmluZyIsImVuY29kZVVSSUNvbXBvbmVudCIsImNvbXBsZXRpb24iLCJjaGF0IiwiY29tcGxldGlvbnMiLCJjcmVhdGUiLCJtb2RlbCIsIm1lc3NhZ2VzIiwicm9sZSIsImNvbnRlbnQiLCJtYXhfdG9rZW5zIiwidGVtcGVyYXR1cmUiLCJyZXNwb25zZVRleHQiLCJjaG9pY2VzIiwiY29uc29sZSIsImxvZyIsIkVycm9yIiwicHJpY2VEYXRhIiwiY2xlYW5lZFJlc3BvbnNlIiwicmVwbGFjZSIsInRyaW0iLCJKU09OIiwicGFyc2UiLCJ2YWxpZGF0ZVByaWNlU2VhcmNoUmVzcG9uc2UiLCJzYW5pdGl6ZVByaWNlRGF0YSIsInBhcnNlRXJyb3IiLCJsZW5ndGgiLCJjYWxjdWxhdGVBY3R1YWxCZXN0UHJpY2VzIiwic2VhcmNoZWRBdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsIndhcm5pbmciLCJiYXNlUHJpY2UiLCJnZXRCYXNlUHJpY2VCeUNhdGVnb3J5IiwiZ2V0UGxhdGZvcm1zQnlDYXRlZ29yeSIsImNhdCIsInBsYXRmb3JtcyIsInNvdXJjZXMiLCJzbGljZSIsIm1hcCIsInBsYXRmb3JtIiwicHJpY2VWYXJpYXRpb24iLCJNYXRoIiwicmFuZG9tIiwicHJpY2UiLCJyb3VuZCIsInVybCIsInRvTG93ZXJDYXNlIiwiYXZhaWxhYmlsaXR5Iiwic2hpcHBpbmciLCJyYXRpbmciLCJwcmljZXMiLCJzIiwiYXZlcmFnZVByaWNlIiwicmVkdWNlIiwic3VtIiwibG93ZXN0UHJpY2UiLCJtaW4iLCJyZWNvbW1lbmRlZFBsYXRmb3JtIiwiZmluZCIsInNvcnQiLCJhIiwiYiIsImNhdGVnb3J5UHJpY2VzIiwicmVxdWlyZWQiLCJldmVyeSIsImZpZWxkIiwiQXJyYXkiLCJpc0FycmF5Iiwic291cmNlIiwidW5kZWZpbmVkIiwiZmlsdGVyIiwiU3RyaW5nIiwibWF4IiwiTnVtYmVyIiwic2FuaXRpemVVcmwiLCJnZXREZWZhdWx0VXJsIiwiZW5jb2RlZFByb2R1Y3QiLCJ1cmxNYXAiLCJhY3RpdmVQYXltZW50TWV0aG9kcyIsInBtIiwiaXNBY3RpdmUiLCJiZXN0UGF5bWVudE9wdGlvbiIsImZpbmRCZXN0UGF5bWVudE1ldGhvZCIsIm9yaWdpbmFsUHJpY2UiLCJhY3R1YWxQcmljZSIsImZpbmFsUHJpY2UiLCJiZXN0UGF5bWVudE1ldGhvZCIsInBheW1lbnRNZXRob2QiLCJkaXNjb3VudCIsInBheW1lbnRCZW5lZml0cyIsIm1ldGhvZCIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsInByaWNlQSIsInByaWNlQiIsImxvd2VzdFByaWNlU291cmNlIiwiYWN0dWFsUHJpY2VzIiwicGF5bWVudE1ldGhvZHMiLCJiZXN0T3B0aW9uIiwibWF4RGlzY291bnQiLCJjYWxjdWxhdGVEaXNjb3VudCIsImRpc2NvdW50UmF0ZSIsInNwZWNpYWxDYXRlZ29yaWVzIiwiY2FzaGJhY2siXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/price-search/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/formdata-node","vendor-chunks/openai","vendor-chunks/form-data-encoder","vendor-chunks/whatwg-url","vendor-chunks/agentkeepalive","vendor-chunks/tr46","vendor-chunks/web-streams-polyfill","vendor-chunks/node-fetch","vendor-chunks/webidl-conversions","vendor-chunks/ms","vendor-chunks/humanize-ms","vendor-chunks/event-target-shim","vendor-chunks/abort-controller"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprice-search%2Froute&page=%2Fapi%2Fprice-search%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprice-search%2Froute.ts&appDir=%2FUsers%2Fiseulgi%2FDesktop%2FProject%2Fepisode%2Fend%2Fclaude%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fiseulgi%2FDesktop%2FProject%2Fepisode%2Fend%2Fclaude&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();